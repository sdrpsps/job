/**
 *  ==================================================================
 * aegis-web-sdk@1.35.26 (c) 2022 TencentCloud Real User Monitoring.
 * Author pumpkincai.
 * Last Release Time Fri May 27 2022 15:24:38 GMT+0800 (GMT+08:00).
 * Released under the MIT License.
 * Thanks for supporting RUM & Aegis!
 * ==================================================================
 **/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Aegis=t()}(this,function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(t!==undefined&&null!==t||n.path)}},n.exports),n.exports}var o,s,u,f=(o=function(e){return e&&e.Math==Math&&e})("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof e&&e)||function(){return this}()||Function("return this")(),d=!(s=function(e){try{return!!e()}catch(t){return!0}})(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),n={}.propertyIsEnumerable,p={f:(u=Object.getOwnPropertyDescriptor)&&!n.call({1:2},1)?function(e){e=u(this,e);return!!e&&e.enumerable}:n},g=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},l={}.toString,c=function(e){return l.call(e).slice(8,-1)},r="".split,b=s(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==c(e)?r.call(e,""):Object(e)}:Object,y=function(e){if(e==undefined)throw TypeError("Can't call method on "+e);return e},h=function(e){return b(y(e))},v=function(e){return"object"==typeof e?null!==e:"function"==typeof e},m=function(e,t){if(!v(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!v(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!v(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!v(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},R=function(e){return Object(y(e))},i={}.hasOwnProperty,w=Object.hasOwn||function(e,t){return i.call(R(e),t)},a=f.document,E=v(a)&&v(a.createElement),O=function(e){return E?a.createElement(e):{}},x=!d&&!s(function(){return 7!=Object.defineProperty(O("div"),"a",{get:function(){return 7}}).a}),S=Object.getOwnPropertyDescriptor,T={f:d?S:function(e,t){if(e=h(e),t=m(t,!0),x)try{return S(e,t)}catch(o){}if(w(e,t))return g(!p.f.call(e,t),e[t])}},P=function(e){if(!v(e))throw TypeError(String(e)+" is not an object");return e},L=Object.defineProperty,I={f:d?L:function(e,t,n){if(P(e),t=m(t,!0),P(n),x)try{return L(e,t,n)}catch(f){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},A=d?function(e,t,n){return I.f(e,t,g(1,n))}:function(e,t,n){return e[t]=n,e},C=function(e,t){try{A(f,e,t)}catch(o){f[e]=t}return t},j=f["__core-js_shared__"]||C("__core-js_shared__",{}),k=Function.toString;"function"!=typeof j.inspectSource&&(j.inspectSource=function(e){return k.call(e)});var N,_,U,M,D,F,q,W,H=j.inspectSource,B=f.WeakMap,G="function"==typeof B&&/native code/.test(H(B)),V=t(function(e){(e.exports=function(e,t){return j[e]||(j[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.14.0",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})}),$=0,X=Math.random(),Q=function(e){return"Symbol("+String(e===undefined?"":e)+")_"+(++$+X).toString(36)},J=V("keys"),K=function(e){return J[e]||(J[e]=Q(e))},z={},Y=f.WeakMap;q=G||j.state?(N=j.state||(j.state=new Y),_=N.get,U=N.has,M=N.set,D=function(e,t){if(U.call(N,e))throw new TypeError("Object already initialized");return t.facade=e,M.call(N,e,t),t},F=function(e){return _.call(N,e)||{}},function(e){return U.call(N,e)}):(W=K("state"),z[W]=!0,D=function(e,t){if(w(e,W))throw new TypeError("Object already initialized");return t.facade=e,A(e,W,t),t},F=function(e){return w(e,W)?e[W]:{}},function(e){return w(e,W)});var Z,ee={set:D,get:F,has:q,enforce:function(e){return q(e)?F(e):D(e,{})},getterFor:function(n){return function(e){var t;if(!v(e)||(t=F(e)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return t}}},te=t(function(e){var t=ee.get,u=ee.enforce,c=String(String).split("String");(e.exports=function(e,t,n,r){var o=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,a=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof t||w(n,"name")||A(n,"name",t),(r=u(n)).source||(r.source=c.join("string"==typeof t?t:""))),e!==f?(o?!a&&e[t]&&(i=!0):delete e[t],i?e[t]=n:A(e,t,n)):i?e[t]=n:C(t,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&t(this).source||H(this)})}),ne=f,re=function(e){return"function"==typeof e?e:undefined},oe=function(e,t){return arguments.length<2?re(ne[e])||re(f[e]):ne[e]&&ne[e][t]||f[e]&&f[e][t]},ie=Math.ceil,ae=Math.floor,ue=function(e){return isNaN(e=+e)?0:(0<e?ae:ie)(e)},ce=Math.min,se=function(e){return 0<e?ce(ue(e),9007199254740991):0},fe=Math.max,le=Math.min,de=function(e,t){e=ue(e);return e<0?fe(e+t,0):le(e,t)},pe=function(u){return function(e,t,n){var r,o=h(e),i=se(o.length),a=de(n,i);if(u&&t!=t){for(;a<i;)if((r=o[a++])!=r)return!0}else for(;a<i;a++)if((u||a in o)&&o[a]===t)return u||a||0;return!u&&-1}},e={includes:pe(!0),indexOf:pe(!1)},he=e.indexOf,ge=function(e,t){var n,r=h(e),o=0,i=[];for(n in r)!w(z,n)&&w(r,n)&&i.push(n);for(;t.length>o;)w(r,n=t[o++])&&(~he(i,n)||i.push(n));return i},ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ye=ve.concat("length","prototype"),me={f:Object.getOwnPropertyNames||function(e){return ge(e,ye)}},we={f:Object.getOwnPropertySymbols},be=oe("Reflect","ownKeys")||function(e){var t=me.f(P(e)),n=we.f;return n?t.concat(n(e)):t},Ee=/#|\.prototype\./,n=function(e,t){e=xe[Oe(e)];return e==Re||e!=Se&&("function"==typeof t?s(t):!!t)},Oe=n.normalize=function(e){return String(e).replace(Ee,".").toLowerCase()},xe=n.data={},Se=n.NATIVE="N",Re=n.POLYFILL="P",Te=n,Pe=T.f,Le=function(e,t){var n,r,o,i,a=e.target,u=e.global,c=e.stat;if(n=u?f:c?f[a]||C(a,{}):(f[a]||{}).prototype)for(r in t){if(o=t[r],i=e.noTargetGet?(i=Pe(n,r))&&i.value:n[r],!Te(u?r:a+(c?".":"#")+r,e.forced)&&i!==undefined){if(typeof o==typeof i)continue;!function(e,t){for(var n=be(t),r=I.f,o=T.f,i=0;i<n.length;i++){var a=n[i];w(e,a)||r(e,a,o(t,a))}}(o,i)}(e.sham||i&&i.sham)&&A(o,"sham",!0),te(n,r,o,e)}},Ie=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Ae=function(r,o,e){if(Ie(r),o===undefined)return r;switch(e){case 0:return function(){return r.call(o)};case 1:return function(e){return r.call(o,e)};case 2:return function(e,t){return r.call(o,e,t)};case 3:return function(e,t,n){return r.call(o,e,t,n)}}return function(){return r.apply(o,arguments)}},Ce=Array.isArray||function(e){return"Array"==c(e)},B=oe("navigator","userAgent")||"",G=f.process,Y=G&&G.versions,pe=Y&&Y.v8;pe?Ye=(Z=pe.split("."))[0]<4?1:Z[0]+Z[1]:B&&(!(Z=B.match(/Edge\/(\d+)/))||74<=Z[1])&&(Z=B.match(/Chrome\/(\d+)/))&&(Ye=Z[1]);var je,ke=Ye&&+Ye,Ne=!!Object.getOwnPropertySymbols&&!s(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ke&&ke<41}),n=Ne&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,_e=V("wks"),Ue=f.Symbol,Me=n?Ue:Ue&&Ue.withoutSetter||Q,De=function(e){return w(_e,e)&&(Ne||"string"==typeof _e[e])||(Ne&&w(Ue,e)?_e[e]=Ue[e]:_e[e]=Me("Symbol."+e)),_e[e]},Fe=De("species"),qe=function(e,t){var n;return new((n=Ce(e)&&("function"==typeof(n=e.constructor)&&(n===Array||Ce(n.prototype))||v(n)&&null===(n=n[Fe]))?undefined:n)===undefined?Array:n)(0===t?0:t)},We=[].push,G=function(d){var p=1==d,h=2==d,g=3==d,v=4==d,y=6==d,m=7==d,w=5==d||y;return function(e,t,n,r){for(var o,i,a=R(e),u=b(a),c=Ae(t,n,3),s=se(u.length),f=0,r=r||qe,l=p?r(e,s):h||m?r(e,0):undefined;f<s;f++)if((w||f in u)&&(i=c(o=u[f],f,a),d))if(p)l[f]=i;else if(i)switch(d){case 3:return!0;case 5:return o;case 6:return f;case 2:We.call(l,o)}else switch(d){case 4:return!1;case 7:We.call(l,o)}return y?-1:g||v?v:l}},Y={forEach:G(0),map:G(1),filter:G(2),some:G(3),every:G(4),find:G(5),findIndex:G(6),filterOut:G(7)},He=Object.keys||function(e){return ge(e,ve)},Be=d?Object.defineProperties:function(e,t){P(e);for(var n,r=He(t),o=r.length,i=0;i<o;)I.f(e,n=r[i++],t[n]);return e},Ge=oe("document","documentElement"),Ve=K("IE_PROTO"),$e=function(){},Xe=function(e){return"<script>"+e+"<\/script>"},Qe=function(){try{je=document.domain&&new ActiveXObject("htmlfile")}catch(f){}var e;Qe=je?function(e){e.write(Xe("")),e.close();var t=e.parentWindow.Object;return e=null,t}(je):((e=O("iframe")).style.display="none",Ge.appendChild(e),e.src=String("javascript:"),(e=e.contentWindow.document).open(),e.write(Xe("document.F=Object")),e.close(),e.F);for(var t=ve.length;t--;)delete Qe.prototype[ve[t]];return Qe()};z[Ve]=!0;var Je=Object.create||function(e,t){var n;return null!==e?($e.prototype=P(e),n=new $e,$e.prototype=null,n[Ve]=e):n=Qe(),t===undefined?n:Be(n,t)},Ke=De("unscopables"),ze=Array.prototype;ze[Ke]==undefined&&I.f(ze,Ke,{configurable:!0,value:Je(null)});var Ye=function(e){ze[Ke][e]=!0},Ze=Y.find,et=!0;"find"in[]&&Array(1).find(function(){et=!1}),Le({target:"Array",proto:!0,forced:et},{find:function(e){return Ze(this,e,1<arguments.length?arguments[1]:undefined)}}),Ye("find"),Le({target:"Object",stat:!0,forced:!d,sham:!d},{defineProperty:I.f});var tt=De("match"),nt=function(e){var t;return v(e)&&((t=e[tt])!==undefined?!!t:"RegExp"==c(e))},rt=De("match"),pe=T.f,ot="".startsWith,it=Math.min,n=function(e){var t=/./;try{"/./"[e](t)}catch(o){try{return t[rt]=!1,"/./"[e](t)}catch(f){}}return!1}("startsWith"),G=!(n||(!(dt=pe(String.prototype,"startsWith"))||dt.writable));Le({target:"String",proto:!0,forced:!G&&!n},{startsWith:function(e){var t=String(y(this));!function(e){if(nt(e))throw TypeError("The method doesn't accept regular expressions")}(e);var n=se(it(1<arguments.length?arguments[1]:undefined,t.length)),e=String(e);return ot?ot.call(t,e,n):t.slice(n,n+e.length)===e}});var at,ut={},pe=!s(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),ct=K("IE_PROTO"),st=Object.prototype,ft=pe?Object.getPrototypeOf:function(e){return e=R(e),w(e,ct)?e[ct]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?st:null},lt=De("iterator"),dt=!1;[].keys&&("next"in(Tt=[].keys())?(At=ft(ft(Tt)))!==Object.prototype&&(at=At):dt=!0),at!=undefined&&!s(function(){var e={};return at[lt].call(e)!==e})||(at={}),w(at,lt)||A(at,lt,function(){return this});var G={IteratorPrototype:at,BUGGY_SAFARI_ITERATORS:dt},pt=I.f,ht=De("toStringTag"),gt=function(e,t,n){e&&!w(e=n?e:e.prototype,ht)&&pt(e,ht,{configurable:!0,value:t})},vt=G.IteratorPrototype,yt=function(){return this},mt=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,e={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),r=e instanceof Array}catch(f){}return function(e,t){return P(e),function(){if(!v(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(),r?n.call(e,t):e.__proto__=t,e}}():undefined),wt=G.IteratorPrototype,bt=G.BUGGY_SAFARI_ITERATORS,Et=De("iterator"),Ot=function(){return this},n=function(e,t,n,r,o,i,a){h=t+" Iterator",(s=n).prototype=Je(vt,{next:g(1,r)}),gt(s,h,!1),ut[h]=yt;var u,c,r=function(e){if(e===o&&p)return p;if(!bt&&e in l)return l[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},s=t+" Iterator",f=!1,l=e.prototype,d=l[Et]||l["@@iterator"]||o&&l[o],p=!bt&&d||r(o),h="Array"==t&&l.entries||d;if(h&&(e=ft(h.call(new e)),wt!==Object.prototype&&e.next&&(ft(e)!==wt&&(mt?mt(e,wt):"function"!=typeof e[Et]&&A(e,Et,Ot)),gt(e,s,!0))),"values"==o&&d&&"values"!==d.name&&(f=!0,p=function(){return d.call(this)}),l[Et]!==p&&A(l,Et,p),ut[t]=p,o)if(u={values:r("values"),keys:i?p:r("keys"),entries:r("entries")},a)for(c in u)!bt&&!f&&c in l||te(l,c,u[c]);else Le({target:t,proto:!0,forced:bt||f},u);return u},xt=ee.set,St=ee.getterFor("Array Iterator"),Rt=n(Array,"Array",function(e,t){xt(this,{type:"Array Iterator",target:h(e),index:0,kind:t})},function(){var e=St(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=undefined,{value:undefined,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values");ut.Arguments=ut.Array,Ye("keys"),Ye("values"),Ye("entries");K={};K[De("toStringTag")]="z";var Tt="[object z]"===String(K),Pt=De("toStringTag"),Lt="Arguments"==c(function(){return arguments}()),It=Tt?c:function(e){var t,n;return e===undefined?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),Pt))?n:Lt?c(t):"Object"==(e=c(t))&&"function"==typeof t.callee?"Arguments":e};Tt||te(Object.prototype,"toString",Tt?{}.toString:function(){return"[object "+It(this)+"]"},{unsafe:!0});var At=function(i){return function(e,t){var n,r=String(y(e)),o=ue(t),e=r.length;return o<0||e<=o?i?"":undefined:(t=r.charCodeAt(o))<55296||56319<t||o+1===e||(n=r.charCodeAt(o+1))<56320||57343<n?i?r.charAt(o):t:i?r.slice(o,o+2):n-56320+(t-55296<<10)+65536}},dt={codeAt:At(!1),charAt:At(!0)},Ct=dt.charAt,jt=ee.set,kt=ee.getterFor("String Iterator");n(String,"String",function(e){jt(this,{type:"String Iterator",string:String(e),index:0})},function(){var e=kt(this),t=e.string,n=e.index;return n>=t.length?{value:undefined,done:!0}:(n=Ct(t,n),e.index+=n.length,{value:n,done:!1})});var Nt=!s(function(){return Object.isExtensible(Object.preventExtensions({}))}),G=t(function(e){var t=I.f,n=Q("meta"),r=0,o=Object.isExtensible||function(){return!0},i=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!v(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!w(e,n)){if(!o(e))return"F";if(!t)return"E";i(e)}return e[n].objectID},getWeakData:function(e,t){if(!w(e,n)){if(!o(e))return!0;if(!t)return!1;i(e)}return e[n].weakData},onFreeze:function(e){return Nt&&a.REQUIRED&&o(e)&&!w(e,n)&&i(e),e}};z[n]=!0}),_t=De("iterator"),Ut=Array.prototype,Mt=De("iterator"),Dt=function(e){var t=e["return"];if(t!==undefined)return P(t.call(e)).value},Ft=function(e,t){this.stopped=e,this.result=t},qt=function(e,t,n){var r,o,i,a,u,c,s=n&&n.that,f=!(!n||!n.AS_ENTRIES),l=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),p=Ae(t,s,1+f+d),h=function(e){return r&&Dt(r),new Ft(!0,e)},g=function(e){return f?(P(e),d?p(e[0],e[1],h):p(e[0],e[1])):d?p(e,h):p(e)};if(l)r=e;else{if("function"!=typeof(s=function(){if(e!=undefined)return e[Mt]||e["@@iterator"]||ut[It(e)]}()))throw TypeError("Target is not iterable");if((l=s)!==undefined&&(ut.Array===l||Ut[_t]===l)){for(o=0,i=se(e.length);o<i;o++)if((a=g(e[o]))&&a instanceof Ft)return a;return new Ft(!1)}r=s.call(e)}for(u=r.next;!(c=u.call(r)).done;){try{a=g(c.value)}catch(R){throw Dt(r),R}if("object"==typeof a&&a&&a instanceof Ft)return a}return new Ft(!1)},Wt=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Ht=De("iterator"),Bt=!1;try{var Gt=0,Vt={next:function(){return{done:!!Gt++}},"return":function(){Bt=!0}};Vt[Ht]=function(){return this},Array.from(Vt,function(){throw 2})}catch(Wa){}var $t,Xt,Qt,Jt,Kt,zt,Yt,Zt,K=function(e,t){if(!t&&!Bt)return!1;var n=!1;try{var r={};r[Ht]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(Wa){}return n},en=function(e,t,n){var r,o;return mt&&"function"==typeof(r=t.constructor)&&r!==n&&v(o=r.prototype)&&o!==n.prototype&&mt(e,o),e},tn=function(e,t,n){for(var r in t)te(e,r,t[r],n);return e},nn=G.getWeakData,rn=ee.set,on=ee.getterFor,an=Y.find,un=Y.findIndex,cn=0,sn=function(e){return e.frozen||(e.frozen=new fn)},fn=function(){this.entries=[]},ln=function(e,t){return an(e.entries,function(e){return e[0]===t})};fn.prototype={get:function(e){e=ln(this,e);if(e)return e[1]},has:function(e){return!!ln(this,e)},set:function(e,t){var n=ln(this,e);n?n[1]=t:this.entries.push([e,t])},"delete":function(t){var e=un(this.entries,function(e){return e[0]===t});return~e&&this.entries.splice(e,1),!!~e}},Vt=function(e){return function(){return e(this,arguments.length?arguments[0]:undefined)}},Tt={getConstructor:function(e,n,r,o){var i=e(function(e,t){Wt(e,i,n),rn(e,{type:n,id:cn++,frozen:undefined}),t!=undefined&&qt(t,e[o],{that:e,AS_ENTRIES:r})}),a=on(n),u=function(e,t,n){var r=a(e),o=nn(P(t),!0);return!0===o?sn(r).set(t,n):o[r.id]=n,e};return tn(i.prototype,{"delete":function(e){var t=a(this);if(!v(e))return!1;var n=nn(e);return!0===n?sn(t)["delete"](e):n&&w(n,t.id)&&delete n[t.id]},has:function(e){var t=a(this);if(!v(e))return!1;var n=nn(e);return!0===n?sn(t).has(e):n&&w(n,t.id)}}),tn(i.prototype,r?{get:function(e){var t=a(this);if(v(e)){var n=nn(e);return!0===n?sn(t).get(e):n?n[t.id]:undefined}},set:function(e,t){return u(this,e,t)}}:{add:function(e){return u(this,e,!0)}}),i}},Qt=-1!==($t="WeakSet").indexOf("Map"),Jt=-1!==$t.indexOf("Weak"),Kt=Qt?"set":"add",zt=f[$t],Yt=zt&&zt.prototype,At={},n=function(e){var n=Yt[e];te(Yt,e,"add"==e?function(e){return n.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(Jt&&!v(e))&&n.call(this,0===e?0:e)}:"get"==e?function(e){return Jt&&!v(e)?undefined:n.call(this,0===e?0:e)}:"has"==e?function(e){return!(Jt&&!v(e))&&n.call(this,0===e?0:e)}:function(e,t){return n.call(this,0===e?0:e,t),this})},Te($t,"function"!=typeof(Zt=zt)||!(Jt||Yt.forEach&&!s(function(){(new zt).entries().next()})))?(Zt=Tt.getConstructor(Vt,$t,Qt,Kt),G.REQUIRED=!0):Te($t,!0)&&(Sn=(Xt=new Zt)[Kt](Jt?{}:-0,1)!=Xt,bn=s(function(){Xt.has(1)}),G=K(function(e){new zt(e)}),xn=!Jt&&s(function(){for(var e=new zt,t=5;t--;)e[Kt](t,t);return!e.has(-0)}),G||(((Zt=Vt(function(e,t){Wt(e,Zt,$t);e=en(new zt,e,Zt);return t!=undefined&&qt(t,e[Kt],{that:e,AS_ENTRIES:Qt}),e})).prototype=Yt).constructor=Zt),(bn||xn)&&(n("delete"),n("has"),Qt&&n("get")),(xn||Sn)&&n(Kt),Jt&&Yt.clear&&delete Yt.clear),At[$t]=Zt,Le({global:!0,forced:Zt!=zt},At),gt(Zt,$t),Jt||Tt.setStrong(Zt,$t,Qt);var dn,pn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},hn=De("iterator"),gn=De("toStringTag"),vn=Rt.values;for(dn in pn){var yn=f[dn],mn=yn&&yn.prototype;if(mn){if(mn[hn]!==vn)try{A(mn,hn,vn)}catch(Wa){mn[hn]=vn}if(mn[gn]||A(mn,gn,dn),pn[dn])for(var wn in Rt)if(mn[wn]!==Rt[wn])try{A(mn,wn,Rt[wn])}catch(Wa){mn[wn]=Rt[wn]}}}Le({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var bn=Date.prototype,En=bn.toString,On=bn.getTime;new Date(NaN)+""!="Invalid Date"&&te(bn,"toString",function(){var e=On.call(this);return e==e?En.call(this):"Invalid Date"});var xn=I.f,Sn=Function.prototype,Rn=Sn.toString,Tn=/^\s*function ([^ (]*)/;!d||"name"in Sn||xn(Sn,"name",{configurable:!0,get:function(){try{return Rn.call(this).match(Tn)[1]}catch(Wa){return""}}});var Pn,Ln,In,n=function(e,t){var n=[][e];return!!n&&s(function(){n.call(null,t||function(){throw 1},1)})},An=Y.forEach,Cn=n("forEach")?[].forEach:function(e){return An(this,e,1<arguments.length?arguments[1]:undefined)};for(Pn in Le({target:"Array",proto:!0,forced:[].forEach!=Cn},{forEach:Cn}),pn){var jn=f[Pn],jn=jn&&jn.prototype;if(jn&&jn.forEach!==Cn)try{A(jn,"forEach",Cn)}catch(Wa){jn.forEach=Cn}}function kn(e){this.name="__st"+(1e9*Math.random()>>>0)+Ln+"__",null==e||e.forEach(this.add,this),Ln+=1}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,value:function(e){if(null===this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o+=1}return undefined}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){return this.substring(t=!t||t<0?0:+t,t+e.length)===e}}),window.WeakSet||(Ln=Date.now()%1e9,kn.prototype.add=function(e){var t=this.name;return e[t]||Object.defineProperty(e,t,{value:!0,writable:!0}),this},kn.prototype["delete"]=function(e){return!!e[this.name]&&(e[this.name]=undefined,!0)},kn.prototype.has=function(e){return!!e[this.name]},In=kn,Object.defineProperty(window,"WeakSet",{value:function(e){return new In(e)}}));var Nn=Object.assign,_n=Object.defineProperty,At=!Nn||s(function(){if(d&&1!==Nn({b:1},Nn(_n({},"a",{enumerable:!0,get:function(){_n(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=Nn({},e)[n]||"abcdefghijklmnopqrst"!=He(Nn({},t)).join("")})?function(e,t){for(var n=R(e),r=arguments.length,o=1,i=we.f,a=p.f;o<r;)for(var u,c=b(arguments[o++]),s=i?He(c).concat(i(c)):He(c),f=s.length,l=0;l<f;)u=s[l++],d&&!a.call(c,u)||(n[u]=c[u]);return n}:Nn;Le({target:"Object",stat:!0,forced:Object.assign!==At},{assign:At});Tt=s(function(){He(1)});Le({target:"Object",stat:!0,forced:Tt},{keys:function(e){return He(R(e))}});var Un=T.f,bn=s(function(){Un(1)});function Mn(e){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Le({target:"Object",stat:!0,forced:!d||bn,sham:!d},{getOwnPropertyDescriptor:function(e,t){return Un(h(e),t)}}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e===undefined||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++)if((r=arguments[n])!==undefined&&null!==r)for(var r=Object(r),o=Object.keys(Object(r)),i=0,a=o.length;i<a;i++){var u=o[i],c=Object.getOwnPropertyDescriptor(r,u);null!=c&&c.enumerable&&(t[u]=r[u])}return t}});var Dn=me.f,Fn={}.toString,qn="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],xn=s(function(){return!Object.getOwnPropertyNames(1)});Le({target:"Object",stat:!0,forced:xn},{getOwnPropertyNames:function(e){return qn&&"[object Window]"==Fn.call(e)?function(e){try{return Dn(e)}catch(Wa){return qn.slice()}}(e):Dn(h(e))}});var Wn=function(e,t,n){t=m(t);t in e?I.f(e,t,g(0,n)):e[t]=n};Le({target:"Object",stat:!0,sham:!d},{getOwnPropertyDescriptors:function(e){for(var t,n,r=h(e),o=T.f,i=be(r),a={},u=0;i.length>u;)(n=o(r,t=i[u++]))!==undefined&&Wn(a,t,n);return a}});var Hn=De("species"),Sn=function(t){return 51<=ke||!s(function(){var e=[];return(e.constructor={})[Hn]=function(){return{foo:1}},1!==e[t](Boolean).foo})},Bn=Y.filter,At=Sn("filter");Le({target:"Array",proto:!0,forced:!At},{filter:function(e){return Bn(this,e,1<arguments.length?arguments[1]:undefined)}});var Gn=e.indexOf,Vn=[].indexOf,$n=!!Vn&&1/[1].indexOf(1,-0)<0,Tt=n("indexOf");Le({target:"Array",proto:!0,forced:$n||!Tt},{indexOf:function(e){return $n?Vn.apply(this,arguments)||0:Gn(this,e,1<arguments.length?arguments[1]:undefined)}});var bn=Sn("splice"),Xn=Math.max,Qn=Math.min;Le({target:"Array",proto:!0,forced:!bn},{splice:function(e,t){var n,r,o,i,a,u,c=R(this),s=se(c.length),f=de(e,s),e=arguments.length;if(0===e?n=r=0:r=1===e?(n=0,s-f):(n=e-2,Qn(Xn(ue(t),0),s-f)),9007199254740991<s+n-r)throw TypeError("Maximum allowed length exceeded");for(o=qe(c,r),i=0;i<r;i++)(a=f+i)in c&&Wn(o,i,c[a]);if(n<(o.length=r)){for(i=f;i<s-r;i++)u=i+n,(a=i+r)in c?c[u]=c[a]:delete c[u];for(i=s;s-r+n<i;i--)delete c[i-1]}else if(r<n)for(i=s-r;f<i;i--)u=i+n-1,(a=i+r-1)in c?c[u]=c[a]:delete c[u];for(i=0;i<n;i++)c[i+f]=arguments[i+2];return c.length=s-r+n,o}});var Jn=[].join,xn=b!=Object,At=n("join",",");Le({target:"Array",proto:!0,forced:xn||!At},{join:function(e){return Jn.call(h(this),e===undefined?",":e)}});var Kn=Y.map,e=Sn("map");Le({target:"Array",proto:!0,forced:!e},{map:function(e){return Kn(this,e,1<arguments.length?arguments[1]:undefined)}}),Le({target:"Object",stat:!0},{setPrototypeOf:mt});Tt=s(function(){ft(1)});Le({target:"Object",stat:!0,forced:Tt,sham:!pe},{getPrototypeOf:function(e){return ft(R(e))}});var zn=function(e,t){return(zn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},Yn=function(){return(Yn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Zn(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}Le({target:"Array",stat:!0},{isArray:Ce});var er=function(){var e=P(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function tr(e,t){return RegExp(e,t)}var bn={UNSUPPORTED_Y:s(function(){var e=tr("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),BROKEN_CARET:s(function(){var e=tr("^r","gy");return e.lastIndex=2,null!=e.exec("str")})},nr=RegExp.prototype.exec,rr=V("native-string-replace",String.prototype.replace),xn=nr,or=(At=/b*/g,nr.call(e=/a/,"a"),nr.call(At,"a"),0!==e.lastIndex||0!==At.lastIndex),ir=bn.UNSUPPORTED_Y||bn.BROKEN_CARET,ar=/()??/.exec("")[1]!==undefined,ur=xn=or||ar||ir?function(e){var t,n,r,o,i=this,a=ir&&i.sticky,u=er.call(i),c=i.source,s=0,f=e;return a&&(-1===(u=u.replace("y","")).indexOf("g")&&(u+="g"),f=String(e).slice(i.lastIndex),0<i.lastIndex&&(!i.multiline||i.multiline&&"\n"!==e[i.lastIndex-1])&&(c="(?: "+c+")",f=" "+f,s++),n=new RegExp("^(?:"+c+")",u)),ar&&(n=new RegExp("^"+c+"$(?!\\s)",u)),or&&(t=i.lastIndex),r=nr.call(a?n:i,f),a?r?(r.input=r.input.slice(s),r[0]=r[0].slice(s),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:or&&r&&(i.lastIndex=i.global?r.index+r[0].length:t),ar&&r&&1<r.length&&rr.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)arguments[o]===undefined&&(r[o]=undefined)}),r}:xn;Le({target:"RegExp",proto:!0,forced:/./.exec!==ur},{exec:ur});var cr=De("species"),sr=RegExp.prototype,fr=!s(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),lr="$0"==="a".replace(/./,"$0"),Tt=De("replace"),dr=!!/./[Tt]&&""===/./[Tt]("a","$0"),pr=!s(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};e="ab".split(e);return 2!==e.length||"a"!==e[0]||"b"!==e[1]}),pe=function(n,e,t,r){var a,o,i=De(n),u=!s(function(){var e={};return e[i]=function(){return 7},7!=""[n](e)}),c=u&&!s(function(){var e=!1,t=/a/;return"split"===n&&((t={}).constructor={},t.constructor[cr]=function(){return t},t.flags="",t[i]=/./[i]),t.exec=function(){return e=!0,null},t[i](""),!e});u&&c&&("replace"!==n||fr&&lr&&!dr)&&("split"!==n||pr)||(a=/./[i],t=(c=t(i,""[n],function(e,t,n,r,o){var i=t.exec;return i===ur||i===sr.exec?u&&!o?{done:!0,value:a.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}},{REPLACE_KEEPS_$0:lr,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:dr}))[0],o=c[1],te(String.prototype,n,t),te(sr,i,2==e?function(e,t){return o.call(e,this,t)}:function(e){return o.call(e,this)})),r&&A(sr[i],"sham",!0)},hr=dt.charAt,gr=function(e,t,n){return t+(n?hr(e,t).length:1)},vr=Math.floor,yr="".replace,mr=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,wr=/\$([$&'`]|\d{1,2})/g,br=function(e,t){var n=e.exec;if("function"==typeof n){n=n.call(e,t);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==c(e))throw TypeError("RegExp#exec called on incompatible receiver");return ur.call(e,t)},Er=Math.max,Or=Math.min;pe("replace",2,function(o,b,E,e){var O=e.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,x=e.REPLACE_KEEPS_$0,S=O?"$":"$0";return[function(e,t){var n=y(this),r=e==undefined?undefined:e[o];return r!==undefined?r.call(e,n,t):b.call(String(n),e,t)},function(e,t){if(!O&&x||"string"==typeof t&&-1===t.indexOf(S)){var n=E(b,e,this,t);if(n.done)return n.value}var r=P(e),o=String(this),i="function"==typeof t;i||(t=String(t));var a,u=r.global;u&&(a=r.unicode,r.lastIndex=0);for(var c=[];;){var s=br(r,o);if(null===s)break;if(c.push(s),!u)break;""===String(s[0])&&(r.lastIndex=gr(o,se(r.lastIndex),a))}for(var f,l="",d=0,p=0;p<c.length;p++){for(var s=c[p],h=String(s[0]),g=Er(Or(ue(s.index),o.length),0),v=[],y=1;y<s.length;y++)v.push((f=s[y])===undefined?f:String(f));var m,w=s.groups,w=i?(m=[h].concat(v,g,o),w!==undefined&&m.push(w),String(t.apply(undefined,m))):function(i,a,u,c,s,e){var f=u+i.length,l=c.length,t=wr;return s!==undefined&&(s=R(s),t=mr),yr.call(e,t,function(e,t){var n;switch(t.charAt(0)){case"$":return"$";case"&":return i;case"`":return a.slice(0,u);case"'":return a.slice(f);case"<":n=s[t.slice(1,-1)];break;default:var r=+t;if(0==r)return e;if(l<r){var o=vr(r/10);return 0!==o&&o<=l?c[o-1]===undefined?t.charAt(1):c[o-1]+t.charAt(1):e}n=c[r-1]}return n===undefined?"":n})}(h,o,g,v,w,t);d<=g&&(l+=o.slice(d,g)+w,d=g+h.length)}return l+o.slice(d)}]});var xr=De("species"),Sr=function(e,t){var n,e=P(e).constructor;return e===undefined||(n=P(e)[xr])==undefined?t:Ie(n)},Rr=bn.UNSUPPORTED_Y,Tr=[].push,Pr=Math.min;pe("split",2,function(o,h,g){var v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,t){var n=String(y(this)),r=t===undefined?4294967295:t>>>0;if(0==r)return[];if(e===undefined)return[n];if(!nt(e))return h.call(n,e,r);for(var o,i,a,u=[],t=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,s=new RegExp(e.source,t+"g");(o=ur.call(s,n))&&!((i=s.lastIndex)>c&&(u.push(n.slice(c,o.index)),1<o.length&&o.index<n.length&&Tr.apply(u,o.slice(1)),a=o[0].length,c=i,u.length>=r));)s.lastIndex===o.index&&s.lastIndex++;return c===n.length?!a&&s.test("")||u.push(""):u.push(n.slice(c)),u.length>r?u.slice(0,r):u}:"0".split(undefined,0).length?function(e,t){return e===undefined&&0===t?[]:h.call(this,e,t)}:h;return[function(e,t){var n=y(this),r=e==undefined?undefined:e[o];return r!==undefined?r.call(e,n,t):v.call(String(n),e,t)},function(e,t){var n=g(v,e,this,t,v!==h);if(n.done)return n.value;var r=P(e),o=String(this),n=Sr(r,RegExp),i=r.unicode,e=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(Rr?"g":"y"),a=new n(Rr?"^(?:"+r.source+")":r,e),u=t===undefined?4294967295:t>>>0;if(0==u)return[];if(0===o.length)return null===br(a,o)?[o]:[];for(var c=0,s=0,f=[];s<o.length;){a.lastIndex=Rr?0:s;var l,d=br(a,Rr?o.slice(s):o);if(null===d||(l=Pr(se(a.lastIndex+(Rr?s:0)),o.length))===c)s=gr(o,s,i);else{if(f.push(o.slice(c,s)),f.length===u)return f;for(var p=1;p<=d.length-1;p++)if(f.push(d[p]),f.length===u)return f;s=c=l}}return f.push(o.slice(c)),f}]},Rr);var Lr=RegExp.prototype,Ir=Lr.toString,V=s(function(){return"/a/b"!=Ir.call({source:"a",flags:"b"})}),e="toString"!=Ir.name;(V||e)&&te(RegExp.prototype,"toString",function(){var e=P(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(n===undefined&&e instanceof RegExp&&!("flags"in Lr)?er.call(e):n)},{unsafe:!0});var Ar=Y.some,At=n("some");Le({target:"Array",proto:!0,forced:!At},{some:function(e){return Ar(this,e,1<arguments.length?arguments[1]:undefined)}});var Cr=De("isConcatSpreadable"),xn=51<=ke||!s(function(){var e=[];return e[Cr]=!1,e.concat()[0]!==e}),Tt=Sn("concat");Le({target:"Array",proto:!0,forced:!xn||!Tt},{concat:function(e){for(var t,n,r,o=R(this),i=qe(o,0),a=0,u=-1,c=arguments.length;u<c;u++)if(function(e){if(!v(e))return!1;var t=e[Cr];return t!==undefined?!!t:Ce(e)}(r=-1===u?o:arguments[u])){if(9007199254740991<a+(n=se(r.length)))throw TypeError("Maximum allowed index exceeded");for(t=0;t<n;t++,a++)t in r&&Wn(i,a,r[t])}else{if(9007199254740991<=a)throw TypeError("Maximum allowed index exceeded");Wn(i,a++,r)}return i.length=a,i}});var jr="\t\n\x0B\f\r                　\u2028\u2029\ufeff",dt="["+jr+"]",kr=RegExp("^"+dt+dt+"*"),Nr=RegExp(dt+dt+"*$"),bn=function(t){return function(e){e=String(y(e));return 1&t&&(e=e.replace(kr,"")),e=2&t?e.replace(Nr,""):e}},V={start:bn(1),end:bn(2),trim:bn(3)},e=me.f,_r=T.f,Ur=I.f,Mr=V.trim,Dr=f.Number,Fr=Dr.prototype,qr="Number"==c(Je(Fr)),Wr=function(e){var t,n,r,o,i,a,u,c=m(e,!1);if("string"==typeof c&&2<c.length)if(43===(t=(c=Mr(c)).charCodeAt(0))||45===t){if(88===(e=c.charCodeAt(2))||120===e)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(i=(o=c.slice(2)).length,a=0;a<i;a++)if((u=o.charCodeAt(a))<48||r<u)return NaN;return parseInt(o,n)}return+c};if(Te("Number",!Dr(" 0o1")||!Dr("0b1")||Dr("+0x1"))){for(var Hr,Br=function(e){var e=arguments.length<1?0:e,t=this;return t instanceof Br&&(qr?s(function(){Fr.valueOf.call(t)}):"Number"!=c(t))?en(new Dr(Wr(e)),t,Br):Wr(e)},Gr=d?e(Dr):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Vr=0;Gr.length>Vr;Vr++)w(Dr,Hr=Gr[Vr])&&!w(Br,Hr)&&Ur(Br,Hr,_r(Dr,Hr));(Br.prototype=Fr).constructor=Br,te(f,"Number",Br)}var $r,Xr=V.trim;Le({target:"String",proto:!0,forced:($r="trim",s(function(){return!!jr[$r]()||"​᠎"!="​᠎"[$r]()||jr[$r].name!==$r}))},{trim:function(){return Xr(this)}});var At=Sn("slice"),Qr=De("species"),Jr=[].slice,Kr=Math.max;Le({target:"Array",proto:!0,forced:!At},{slice:function(e,t){var n,r,o,i=h(this),a=se(i.length),u=de(e,a),c=de(t===undefined?a:t,a);if(Ce(i)&&((n="function"==typeof(n=i.constructor)&&(n===Array||Ce(n.prototype))||v(n)&&null===(n=n[Qr])?undefined:n)===Array||n===undefined))return Jr.call(i,u,c);for(r=new(n===undefined?Array:n)(Kr(c-u,0)),o=0;u<c;u++,o++)u in i&&Wn(r,o,i[u]);return r.length=o,r}});var zr,Yr=(eo.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},eo.prototype.on=function(e,t,n){if(void 0===n&&(n=0),this){var r=this.eventsList[e];return(r||(this.eventsList[e]=[],r=this.eventsList[e]),-1!==this.indexOf(r,t))?this:(r.push({name:e,type:n||0,callback:t}),this)}},eo.prototype.one=function(e,t){this.on(e,t,1)},eo.prototype.remove=function(e,t){if(this){var n=this.eventsList[e];if(!n)return null;if(t)return n.length&&(t=this.indexOf(n,t),n.splice(t,1)),this;try{delete this.eventsList[e]}catch(s){}return null}},eo.prototype.clear=function(){this.eventsList={}},eo),Zr=function(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}};function eo(){var a=this;this.emit=function(e,t){if(a){var n;if(null!=(r=a.eventsList[e])&&r.length)for(var r=r.slice(),o=0;o<r.length;o++){n=r[o];try{var i=n.callback.apply(a,[t]);if(1===n.type&&a.remove(e,n.callback),!1===i)break}catch(u){throw u}}return a}},this.eventsList={}}(xn=zr=zr||{})[xn.number=-1]="number",xn.string="";var to,no,ro,oo=function(e,t){return"number"==typeof e||"string"==typeof e?e:t?zr.string:zr.number},io=function(e,t){return"string"==typeof e?e.split("?")[t?1:0]||"":e},ao=function(e){return"string"==typeof e&&e.startsWith("//")?"undefined"!=typeof location&&"https:"===location.protocol:/^https/.test(e)},uo=["application/octet-stream","application/xhtml+xml","application/xml","application/pdf","application/pkcs12","application/javascript","application/ecmascript","application/vnd.mspowerpoint","application/vnd.apple.mpegurl","application/ogg","text/css","text/javascript","image","audio","video"],co=function(t){return uo.some(function(e){return-1!==t.indexOf(e)})},so=["ret","retcode","code","errcode"],fo=function(e,t,n){var r;try{if("function"==typeof(null==t?void 0:t.retCodeHandler)){var o=t.retCodeHandler(e,null==n?void 0:n.url,null==n?void 0:n.ctx)||{};return{code:void 0===(i=o.code)?"unknown":i,isErr:o.isErr}}"string"==typeof e&&(e=JSON.parse(e)),"function"==typeof(null===(r=null==t?void 0:t.ret)||void 0===r?void 0:r.join)&&(so=[].concat(t.ret.map(function(e){return e.toLowerCase()})));var i,a=Object.getOwnPropertyNames(e).filter(function(e){return-1!==so.indexOf(e.toLowerCase())});return a.length?{code:""+(i=Number(e[a[0]])),isErr:0!==i}:{code:"unknown",isErr:!1}}catch(u){return{code:"unknown",isErr:!1}}},lo=function(){var n=new WeakSet;return function(e,t){if(t instanceof Error)return"Error.message: "+t.message+" \n  Error.stack: "+t.stack;if("object"===Mn(t)&&null!==t){if(n.has(t))return"[Circular "+(e||"root")+"]";n.add(t)}return t}},po=function(e){if("string"==typeof e)return e;try{return e instanceof Error?(JSON.stringify(e,lo(),4)||"undefined").replace(/"/gim,""):JSON.stringify(e,lo(),4)||"undefined"}catch(t){return"error happen when aegis stringify: \n "+t.message+" \n "+t.stack}},ho=function(e){if("string"==typeof e)return e;try{return JSON.stringify(e,lo())||"undefined"}catch(t){return"error happen when aegis stringify: \n "+t.message+" \n "+t.stack}},go=function Ha(n,r){void 0===r&&(r=3);var o,i,a,u="";return Array.isArray(n)?(u+="[",o=n.length,n.forEach(function(e,t){"object"===Mn(e)&&1<r?u+=Ha(e,r-1):u+=yo(e),u+=t===o-1?"":","}),u+="]"):n instanceof Object?(u="{",i=Object.keys(n),a=i.length,i.forEach(function(e,t){"object"===Mn(n[e])&&1<r?u+='"'+e+'":'+Ha(n[e],r-1):u+=vo(e,n[e]),u+=t===a-1||t<a-1&&"undefined"==typeof n[i[t+1]]?"":","}),u+="}"):u+=n,u},vo=function(e,t){var n=Mn(t),r="";return"string"===n||"object"===n?r+='"'+e+'":"'+t+'"':"function"==typeof t?r+='"'+e+'":"function '+t.name+'"':"symbol"===Mn(t)?r+='"'+e+'":"symbol"':"number"!=typeof t&&"boolean"!==n||(r+='"'+e+'": '+t),r},yo=function(e){var t=Mn(e);return""+("undefined"===t||"symbol"===t||"function"===t?"null":"string"===t||"object"===t?'"'+e+'"':e)},mo=(Eo.prototype.sourceURL=function(){return this.data.responseURL},Eo.prototype.status=function(){return Number(this.data.status)},Eo.prototype.headers=function(){var e=this.data.getAllResponseHeaders().split("\n"),n={};return e.forEach(function(e){var t;e&&(e=(t=e.split(": "))[0],t=t[1].trim(),n[e]=t)}),n},Eo),wo=(bo.prototype.sourceURL=function(){return this.data.url},bo.prototype.status=function(){return Number(this.data.status)},bo.prototype.headers=function(){var n={};return this.data.headers.forEach(function(e,t){n[t]=e}),n},bo);function bo(e,t){this.type="fetch",this.data=e||{},this.data.response=t}function Eo(e){this.type="xhr",this.data=e}(Tt=to=to||{}).INFO_ALL="-1",Tt.API_RESPONSE="1",Tt.INFO="2",Tt.ERROR="4",Tt.PROMISE_ERROR="8",Tt.AJAX_ERROR="16",Tt.SCRIPT_ERROR="32",Tt.IMAGE_ERROR="64",Tt.CSS_ERROR="128",Tt.CONSOLE_ERROR="256",Tt.MEDIA_ERROR="512",Tt.RET_ERROR="1024",Tt.REPORT="2048",Tt.PV="4096",Tt.EVENT="8192",Tt.PAGE_NOT_FOUND_ERROR="16384",Tt.WEBSOCKET_ERROR="32768",(dt={})[dt.android=1]="android",dt[dt.ios=2]="ios",dt[dt.windows=3]="windows",dt[dt.macos=4]="macos",dt[dt.linux=5]="linux",dt[dt.devtools=6]="devtools",dt[dt.other=100]="other",(bn={})[bn.unknown=100]="unknown",bn[bn.wifi=1]="wifi",bn[bn.net2g=2]="net2g",bn[bn.net3g=3]="net3g",bn[bn.net4g=4]="net4g",bn[bn.net5g=5]="net5g",bn[bn.net6g=6]="net6g",(e=no=no||{}).LOG="log",e.SPEED="speed",e.PERFORMANCE="performance",e.OFFLINE="offline",e.WHITE_LIST="whiteList",e.VITALS="vitals",e.PV="pv",e.CUSTOM_PV="customPV",e.EVENT="event",e.CUSTOM="custom",e.SDK_ERROR="sdkError",e.SET_DATA="setData",(V=ro=ro||{}).production="production",V.gray="gray",V.pre="pre",V.daily="daily",V.local="local",V.test="test";var Sn=function(s){return function(e,t,n,r){Ie(t);var o=R(e),i=b(o),a=se(o.length),u=s?a-1:0,c=s?-1:1;if(n<2)for(;;){if(u in i){r=i[u],u+=c;break}if(u+=c,s?u<0:a<=u)throw TypeError("Reduce of empty array with no initial value")}for(;s?0<=u:u<a;u+=c)u in i&&(r=t(r,i[u],u,o));return r}},At={left:Sn(!(V.others="others")),right:Sn(!0)},Oo="process"==c(f.process),xo=At.left,xn=n("reduce");Le({target:"Array",proto:!0,forced:!xn||!Oo&&79<ke&&ke<83},{reduce:function(e){return xo(this,e,arguments.length,1<arguments.length?arguments[1]:undefined)}});var So=function(r,o){return function(e,t){var n=o.logCreated;if("function"!=typeof n)return r("beforeWrite",e),t(e);e=e.filter(function(e){return!1!==n(e)});return r("beforeWrite",e),t(e)}},Ro=[].slice,Tt=/MSIE .\./.test(B),dt=function(o){return function(e,t){var n=2<arguments.length,r=n?Ro.call(arguments,2):undefined;return o(n?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,t)}};Le({global:!0,bind:!0,forced:Tt},{setTimeout:dt(f.setTimeout),setInterval:dt(f.setInterval)});var To=function(e){return e.filter(function(n,r){return"static"!==n.type||!e.find(function(e,t){return n.url===e.url&&200===n.status&&r<t})})},Po=function(n,r){var o,i=[],a=n.config;return n.lifeCycle.on("destroy",function(){i.length=0}),function(e,t){if(Array.isArray(e)?i=i.concat(e):i.push(e),r&&i.length>=r||n.sendNow&&0<i.length)return i=To(i),t(i.splice(0,i.length)),void(o&&clearTimeout(o));o&&clearTimeout(o),o=setTimeout(function(){o=null,0<(i=To(i)).length&&t(i.splice(0,i.length))},a.delay)}},Lo=function(e,t){return Array.isArray(e)?t(e.map(function(e){return Yn(Yn({},e),{msg:"string"==typeof e.msg?e.msg:[].concat(e.msg).map(po).join(" ")})})):t([Yn(Yn({},e),{msg:"string"==typeof e.msg?e.msg:po(e.msg)})])},Io=function(e){e.level===to.INFO_ALL&&(e.level=to.INFO)},Ao=function(a){var e,u=!1,c=!1,t=!1,s=[];return a.lifeCycle.on("onConfigChange",function(){e&&clearTimeout(e),e=setTimeout(function(){var e,n;!t&&a.config&&(t=!0,e=a.config.whiteListUrl,(n=void 0===e?"":e)&&a.sendPipeline([function(e,t){t({url:n,type:no.WHITE_LIST,success:function(e){c=!0;try{var t=e.data||JSON.parse(e),n=t.retcode,r=t.result,o=void 0===r?{}:r;if(0===n){if(u=o.is_in_white_list,a.isWhiteList=u,o.shutdown)return void a.destroy();0<=o.rate&&o.rate<=1&&(a.config.random=o.rate,a.isGetSample=!1)}a.isWhiteList&&s.length?_o(a)(s.splice(0),function(){}):!a.isWhiteList&&s.length&&(s.length=0);var i=a.config.onWhitelist;"function"==typeof i&&i(u)}catch(l){}},fail:function(e){"403 forbidden"===e&&a.destroy(),c=!0}})}],no.WHITE_LIST)(null),t=!1)},a.config.uin?50:500)}),a.lifeCycle.on("destroy",function(){s.length=0}),function(e,t){var n;u||null!==(n=null===(n=a.config)||void 0===n?void 0:n.api)&&void 0!==n&&n.reportRequest?t(e.concat(s.splice(0)).map(function(e){return Io(e),e})):(e=e.filter(function(e){return e.level!==to.INFO&&e.level!==to.API_RESPONSE?(Io(e),!0):(c||(s.push(e),200<=s.length&&(s.length=200)),!1)})).length&&t(e)}},Co=function(r){return setTimeout(function(){var e=r.config.pvUrl,n=void 0===e?"":e;n&&r.sendPipeline([function(e,t){t({url:n,type:no.PV,fail:function(e){"403 forbidden"===e&&r.destroy()}})}],no.PV)(null)},100),function(e,t){t(e)}},jo=function(e){var t=String(y(this)),n="",r=ue(e);if(r<0||r==Infinity)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n};Le({target:"String",proto:!0},{repeat:jo});var ko=function(o){var i={};return function(e,t){var n,r;o.speedSample?(r="object"===Mn(o.repeat)?o.repeat:{repeat:o.repeat},n=+r.speed||+r.repeat||5,Array.isArray(e)?(r=e.filter(function(e){var t=!i[e.url]||i[e.url]<n;return i[e.url]=1+~~i[e.url],t})).length&&t(r):(!i[e.url]||i[e.url]<n)&&(i[e.url]=1+~~i[e.url],t(e))):t(e)}},No=function(r){var o={};return function(e,t){var n="number"==typeof r.repeat?r.repeat:5;if(0===n)return t(e);t(e.filter(function(e){return e.level!==to.ERROR&&e.level!==to.PROMISE_ERROR&&e.level!==to.AJAX_ERROR&&e.level!==to.SCRIPT_ERROR&&e.level!==to.IMAGE_ERROR&&e.level!==to.CSS_ERROR&&e.level!==to.MEDIA_ERROR||(o[e.msg]=o[e.msg]||0,o[e.msg]+=1,!(o[e.msg]>n))}))}},_o=function(r){return function(e){return r.sendPipeline([function(e,n){return n({url:r.config.url||"",data:function(e){if(!e||0===e.length)return"{}";e=Array.isArray(e)?e:[e];var t=Object.keys(e[0]),n={};return t.forEach(function(t){n[t]=e.map(function(e){return e[t]})}),n.count=e.length,ho(n)}((t=e,(Array.isArray(t)?t:[t]).map(function(n){return Object.getOwnPropertyNames(n).reduce(function(e,t){return"ctx"!==t&&(e[t]=n[t]),e},{level:to.INFO,msg:""})}))),method:"post",contentType:"application/json",type:no.LOG,log:e,requestConfig:{timeout:5e3},success:function(){var t=r.config.onReport;"function"==typeof t&&e.forEach(function(e){t(e)}),"function"==typeof n&&n([])},fail:function(e){"403 forbidden"===e&&r.destroy()}});var t}],no.LOG)(e)}},Uo=function(r){return function(e){r.sendPipeline([function(e,t){var n=e.map(function(e){return{name:e.name,ext1:e.ext1||r.config.ext1||"",ext2:e.ext2||r.config.ext2||"",ext3:e.ext3||r.config.ext3||""}});t({url:r.config.eventUrl+"?payload="+encodeURIComponent(JSON.stringify(n)),type:no.EVENT,log:e,fail:function(e){"403 forbidden"===e&&r.destroy()}})}],no.EVENT)(e)}},Mo=function(n){return function(e){return n.sendPipeline([function(e,t){t({url:n.config.customTimeUrl+"?payload="+encodeURIComponent(JSON.stringify({custom:e})),type:no.CUSTOM,log:e,fail:function(e){"403 forbidden"===e&&n.destroy()}})}],no.CUSTOM)(e)}},Do=function(o){return function(e,t){o.lifeCycle.emit("modifyRequest",e);var n=o.config.modifyRequest;if("function"==typeof n)try{var r=n(e);"object"===Mn(r)&&"url"in r&&(e=r)}catch(Wa){console.error(Wa)}t(e)}},Fo=function(r){return function(e,t){r.lifeCycle.emit("afterRequest",e);var n=r.config.afterRequest;"function"==typeof n&&!1===n(e)||t(e)}},qo=function(){},Wo=function(n){if(!n||!n.reduce||!n.length)throw new TypeError("createPipeline need at least one function param");return 1===n.length?function(e,t){n[0](e,t||qo)}:n.reduce(function(n,r){return function(e,t){return void 0===t&&(t=qo),n(e,function(e){return null==r?void 0:r(e,t)})}})},Ho=function(t,n){Object.getOwnPropertyNames(t).forEach(function(e){"function"==typeof t[e]&&"constructor"!==e&&(n?n[e]="sendPipeline"===e?function(){return function(){}}:function(){}:t[e]=function(){})})},bn=(Object.defineProperty(Vo.prototype,"__version__",{get:function(){return console.warn("__version__ has discard, please use version"),"1.35.26"},enumerable:!1,configurable:!0}),Object.defineProperty(Vo.prototype,"LogType",{get:function(){return console.warn("LogType has discard, please use logType"),to},enumerable:!1,configurable:!0}),Vo.prototype.init=function(e){this.setConfig(e);for(var t=0;t<Vo.installedPlugins.length;t++)try{Vo.installedPlugins[t].patch(this)}catch(f){this.sendSDKError(f)}this.lifeCycle.emit("onInited")},Vo.prototype.setConfig=function(e){Object.assign(this.config,e);var t=this.config,n=t.id,r=t.uin,o=t.version,i=t.ext1,a=t.ext2,u=t.ext3,c=t.aid,e=t.env,s=void 0===e?"production":e,e=t.pageUrl,t=this.bean.id!==n||this.bean.uin!==r||this.bean.aid!==c;return this.bean.id=n||"",this.bean.uin=r||"",this.bean.version=o||"1.35.26",this.bean.aid=c||"",this.bean.env=function(){switch(s){case ro.production:case ro.gray:case ro.pre:case ro.daily:case ro.local:case ro.test:case ro.others:return 1;default:return}}()?s:ro.others,e&&this.extendBean("from",encodeURIComponent(e)),i&&this.extendBean("ext1",encodeURIComponent(i)),a&&this.extendBean("ext2",encodeURIComponent(a)),u&&this.extendBean("ext3",encodeURIComponent(u)),t&&this.lifeCycle.emit("onConfigChange",this.config),this.config},Vo.use=function(e){-1===Vo.installedPlugins.indexOf(e)&&e.aegisPlugin&&Vo.installedPlugins.push(e)},Vo.unuse=function(e){e=Vo.installedPlugins.indexOf(e);-1!==e&&Vo.installedPlugins.splice(e,1)},Vo.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:to.INFO,msg:e};1===e.length&&e[0].msg&&Object.assign(n,Yn({},e[0]),{level:to.INFO}),this.normalLogPipeline(n)},Vo.prototype.infoAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:to.INFO_ALL,msg:e};1===e.length&&e[0].msg&&Object.assign(n,Yn({},e[0]),{level:to.INFO_ALL}),this.normalLogPipeline(n)},Vo.prototype.report=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:to.REPORT,msg:e};1===e.length&&e[0].msg&&Object.assign(n,Yn({},e[0])),this.normalLogPipeline(n)},Vo.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:to.ERROR,msg:e};1===e.length&&e[0].msg&&Object.assign(n,Yn({},e[0]),{level:to.ERROR}),this.normalLogPipeline(n)},Vo.prototype.speedLogPipeline=function(e){throw new Error('You need to override "speedLogPipeline" method')},Vo.prototype.reportPv=function(n){var r,o=this;n&&(console.warn("reportPv is deprecated, please use reportEvent"),r=""+Object.getOwnPropertyNames(this.bean).filter(function(e){return"id"!==e}).map(function(e){return e+"="+o.bean[e]}).join("&"),this.sendPipeline([function(e,t){t({url:o.config.url+"/"+n+"?"+r,addBean:!1,type:no.CUSTOM_PV,fail:function(e){"403 forbidden"===e&&o.destroy()}})}],no.CUSTOM_PV)(null))},Vo.prototype.reportEvent=function(e){e&&((e="string"==typeof e?{name:e,ext1:this.config.ext1||"",ext2:this.config.ext2||"",ext3:this.config.ext3||""}:e).name?this.eventPipeline(e):console.warn("reportEvent params error"))},Vo.prototype.reportTime=function(e,t){if("object"===Mn(e))return this.reportT(e);"string"==typeof e?"number"==typeof t?t<0||6e4<t?console.warn("reportTime: duration must between 0 and 60000"):this.submitCustomTime(e,t):console.warn("reportTime: second param must be number"):console.warn("reportTime: first param must be a string")},Vo.prototype.reportT=function(e){var t=e.name,n=e.duration,r=e.ext1,o=void 0===r?"":r,i=e.ext2,r=void 0===i?"":i,i=e.ext3,i=void 0===i?"":i,e=e.from;if("string"==typeof t&&"number"==typeof n&&"string"==typeof o&&"string"==typeof r&&"string"==typeof i){if(!(n<0||6e4<n))return this.submitCustomTime(t,n,o,r,i,void 0===e?"":e);console.warn("reportTime: duration must between 0 and 60000")}else console.warn("reportTime: params error")},Vo.prototype.time=function(e){"string"==typeof e?this.timeMap[e]?console.warn("Timer "+e+" already exists"):this.timeMap[e]=Date.now():console.warn("time: first param must be a string")},Vo.prototype.timeEnd=function(e){"string"==typeof e?this.timeMap[e]?(this.submitCustomTime(e,Date.now()-this.timeMap[e]),delete this.timeMap[e]):console.warn("Timer "+e+" does not exist"):console.warn("timeEnd: first param must be a string")},Vo.prototype.submitCustomTime=function(e,t,n,r,o,i){this.customTimePipeline({name:e,duration:t,ext1:n||this.config.ext1,ext2:r||this.config.ext2,ext3:o||this.config.ext3,from:i||undefined})},Vo.prototype.extendBean=function(e,t){this.bean[e]=t},Vo.prototype.sendPipeline=function(e,t){var n,i,a,u=this;return Wo(Zn([function(e,t){if("number"!=typeof n.config.random&&(console.warn("random must in [0, 1], default is 1."),n.config.random=1),!n.isHidden||!n.isGetSample)if(n.isGetSample)n.isHidden||t(e);else{if(n.isGetSample=!0,Math.random()<n.config.random)return n.isHidden=!1,t(e);n.isHidden=!0}},(a=t,function(e,t){var n=Array.isArray(e),r=n?e:[e];i.lifeCycle.emit("beforeRequest",e);var o=i.config.beforeRequest;(r="function"==typeof o?r.map(function(e){try{var t=o({logs:e,logType:a});return(null==t?void 0:t.logType)===a&&null!=t&&t.logs?t.logs:!1!==t&&e}catch(Wa){return e}}).filter(function(e){return!1!==e}):r).length&&(r=function(e,t){if(!Array.isArray(e)||e.length<=1)return e;var n=[],r=[];return!(r="string"==typeof t?[t]:t)||r.length<=0||(r.forEach(function(t){e.forEach(function(e){null!=e&&e[t]&&n.push(t)})}),0<n.length&&(e=e.map(function(e){var t={};return n.forEach(function(e){t[e]=""}),Yn(Yn({},t),e)}))),e}(r,["ext1","ext2","ext3","level","trace","tag","seq"]),t(n?r:r[0]))})],e,[Do(i=n=this),function(r,o){u.request(r,function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u.failRequestCount=0,o({isErr:!1,result:t,logType:null==r?void 0:r.type,logs:null==r?void 0:r.log}),null===(e=null==r?void 0:r.success)||void 0===e||e.call.apply(e,Zn([r],t))},function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];10<=++u.failRequestCount&&u.destroy(),o({isErr:!0,result:t,logType:null==r?void 0:r.type,logs:null==r?void 0:r.log}),null===(e=null==r?void 0:r.fail)||void 0===e||e.call.apply(e,Zn([r],t))})},Fo(this)]))},Vo.prototype.send=function(e,o,i){var t=this;return Wo([Do(this),function(n,r){t.request(n,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r({isErr:!1,result:e,logType:n.type,logs:n.log}),null==o||o.apply(void 0,e)},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r({isErr:!0,result:e,logType:n.type,logs:n.log}),null==i||i.apply(void 0,e)})},Fo(this)])(e)},Vo.prototype.request=function(e,t,n){throw new Error('You need to override "request" method')},Vo.prototype.sendSDKError=function(e){var n=this;this.sendPipeline([function(e,t){t({url:n.config.url+"?id=1085&msg[0]="+encodeURIComponent(po(e))+"&level[0]=2&from="+n.config.id+"&count=1&version="+n.config.id+"(1.35.26)",addBean:!1,method:"get",type:no.SDK_ERROR,log:e})}],no.SDK_ERROR)(e)},Vo.prototype.destroy=function(e){void 0===e&&(e=!1);var t,n,r=Vo.instances.indexOf(this);-1!==r&&Vo.instances.splice(r,1);for(var o=Vo.installedPlugins.length-1;0<=o;o--)try{Vo.installedPlugins[o].unpatch(this)}catch(g){this.sendSDKError(g)}if(this.lifeCycle.emit("destroy"),this.lifeCycle.clear(),e)t=this,n=Object.getOwnPropertyDescriptors(t),Object.keys(n).forEach(function(e){n[e].writable&&(t[e]=null)}),Object.setPrototypeOf(this,null);else{for(var i=this;i.constructor!==Object&&Ho(i,this),i=Object.getPrototypeOf(i););0===Vo.instances.length&&(e=Object.getPrototypeOf(this).constructor,Ho(e),Ho(Vo))}},Vo.version="1.35.26",Vo.instances=[],Vo.logType=to,Vo.environment=ro,Vo.installedPlugins=[],Vo),Bo=[].slice,Go={},e=Function.bind||function(t){var n=Ie(this),r=Bo.call(arguments,1),o=function(){var e=r.concat(Bo.call(arguments));return this instanceof o?function(e,t,n){if(!(t in Go)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";Go[t]=Function("C,a","return new C("+r.join(",")+")")}return Go[t](e,n)}(n,e.length,e):n.apply(t,e)};return v(n.prototype)&&(o.prototype=n.prototype),o};function Vo(e){var n,t,o=this;this.isGetSample=!1,this.isHidden=!1,this.config={version:0,delay:1e3,onError:!0,repeat:5,random:1,aid:!0,device:!0,pagePerformance:!0,webVitals:!0,speedSample:!0,onClose:!0,hostUrl:"https://aegis.qq.com",websocketHack:!1,env:"production",url:"",offlineUrl:"",whiteListUrl:"",pvUrl:"",speedUrl:"",customTimeUrl:"",performanceUrl:"",webVitalsUrl:"",eventUrl:"",setDataReportUrl:""},this.isWhiteList=!1,this.lifeCycle=new Yr,this.bean={},this.normalLogPipeline=Wo([Po(this,5),Lo,function(e,t){var r=n.config;t(e=e.map(function(e){var t,n=r.maxLength||204800;try{if(!e.msg||e.msg.length<=n)return e;e.msg=null===(t=e.msg)||void 0===t?void 0:t.substring(0,n)}catch(s){e.msg=po(e.msg).substring(0,r.maxLength)}return e}))},No((n=this).config),So(this.lifeCycle.emit,this.config),Co(this),Ao(this),function(e,t){try{var n=JSON.parse(JSON.stringify(e));o.lifeCycle.emit("beforeReport",n);var r=o.config.beforeReport;(e="function"==typeof r?e.filter(function(e){return!1!==r(e)}):e).length&&t(e)}catch(d){}},_o(this)]),this.eventPipeline=Wo([Po(this,5),Uo(this)]),this.timeMap={},this.failRequestCount=0,this.customTimePipeline=Wo([Po(this,5),Mo(this)]),this.config=(t=this.config,void 0===(e=e.hostUrl)&&(e="https://aegis.qq.com"),t.url=t.url||e+"/collect",t.offlineUrl=t.offlineUrl||e+"/offline",t.whiteListUrl=t.whiteListUrl||e+"/collect/whitelist",t.pvUrl=t.pvUrl||e+"/collect/pv",t.eventUrl=t.eventUrl||e+"/collect/events",t.speedUrl=t.speedUrl||e+"/speed",t.customTimeUrl=t.customTimeUrl||e+"/speed/custom",t.performanceUrl=t.performanceUrl||e+"/speed/performance",t.webVitalsUrl=t.webVitalsUrl||e+"/speed/webvitals",t.setDataReportUrl=t.SetDataReportUrl||e+"/speed/miniProgramData",t),Vo.instances.push(this)}Le({target:"Function",proto:!0},{bind:e});var $o=(Zo.prototype.patch=function(e){this.canUse(e)&&this.exist(e)&&(this.instances.push(e),this.triggerInit(e),this.triggerOnNewAegis(e))},Zo.prototype.unpatch=function(e){e=this.instances.indexOf(e);-1!==e&&(this.instances.splice(e,1),0===this.instances.length&&this.uninstall())},Zo.prototype.countInstance=function(){return this.instances.length},Zo.prototype.uninstall=function(){var e;null===(e=null===(e=this.option)||void 0===e?void 0:e.destroy)||void 0===e||e.apply(this)},Zo.prototype.walk=function(n){var r=this;this.instances.forEach(function(e){var t=r.canUse(e);t&&n(e,t)})},Zo.prototype.canUse=function(e){e=this.getConfig(e);return!(!e||"object"!==Mn(e))||!!e},Zo.prototype.getConfig=function(e){return null===(e=e.config)||void 0===e?void 0:e[this.name]},Zo.prototype.exist=function(e){return-1===this.instances.indexOf(e)},Zo.prototype.triggerInit=function(e){var t;this.inited||(this.inited=!0,null===(t=null===(t=this.option)||void 0===t?void 0:t.init)||void 0===t||t.call(this.option,this.getConfig(e)))},Zo.prototype.triggerOnNewAegis=function(e){var t;null===(t=null===(t=this.option)||void 0===t?void 0:t.onNewAegis)||void 0===t||t.call(this.option,e,this.getConfig(e))},Zo),V=new $o({name:"aid",aid:"",init:function(e){try{var t=!0!==e&&e||window.localStorage.getItem("AEGIS_ID");t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),window.localStorage.setItem("AEGIS_ID",t)),this.aid=t}catch(o){}},onNewAegis:function(e){e.bean.aid=this.aid,e.config.aid=this.aid}}),Xo=1..toFixed,Qo=Math.floor,Jo=function(e,t,n){return 0===t?n:t%2==1?Jo(e,t-1,n*e):Jo(e*e,t/2,n)},Ko=function(e,t,n){for(var r=-1,o=n;++r<6;)o+=t*e[r],e[r]=o%1e7,o=Qo(o/1e7)},zo=function(e,t){for(var n=6,r=0;0<=--n;)r+=e[n],e[n]=Qo(r/t),r=r%t*1e7},Yo=function(e){for(var t,n=6,r="";0<=--n;)""===r&&0!==n&&0===e[n]||(t=String(e[n]),r=""===r?t:r+jo.call("0",7-t.length)+t);return r},Sn=Xo&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0))||!s(function(){Xo.call({})});function Zo(e){this.aegisPlugin=!0,this.name="",this.instances=[],this.inited=!1,e.$walk=this.walk.bind(this),e.$getConfig=this.getConfig.bind(this),this.option=e,this.name=e.name}Le({target:"Number",proto:!0,forced:Sn},{toFixed:function(e){var t,n,r=function(e){if("number"!=typeof e&&"Number"!=c(e))throw TypeError("Incorrect invocation");return+e}(this),o=ue(e),i=[0,0,0,0,0,0],a="",u="0";if(o<0||20<o)throw RangeError("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||1e21<=r)return String(r);if(r<0&&(a="-",r=-r),1e-21<r)if(e=(n=function(){for(var e=0,t=r*Jo(2,69,1);4096<=t;)e+=12,t/=4096;for(;2<=t;)e+=1,t/=2;return e}()-69)<0?r*Jo(2,-n,1):r/Jo(2,n,1),e*=4503599627370496,0<(n=52-n)){for(Ko(i,0,e),t=o;7<=t;)Ko(i,1e7,0),t-=7;for(Ko(i,Jo(10,t,1),0),t=n-1;23<=t;)zo(i,1<<23),t-=23;zo(i,1<<t),Ko(i,1,1),zo(i,2),u=Yo(i)}else Ko(i,0,e),Ko(i,1<<-n,0),u=Yo(i)+jo.call("0",o);return 0<o?a+((n=u.length)<=o?"0."+jo.call("0",o-n)+u:u.slice(0,n-o)+"."+u.slice(n-o)):a+u}});var ei=function(t){if(t.payload){var n={};return Object.keys(t).forEach(function(e){"payload"!==e&&(n[e]=t[e])}),n}return t},ti=function(e,t){var n,r={fetch:[],"static":[]},o=new FormData;return Array.isArray(e)?e.forEach(function(e){var t=ei(e);r[e.type].push(t)}):(n=ei(e),r[e.type].push(n)),o.append("payload",ho(Yn({duration:r},t))),o},ni=function(){return"undefined"!=typeof window.performance&&"function"==typeof performance.clearResourceTimings&&"function"==typeof performance.getEntriesByType&&"function"==typeof performance.now},ri=new $o({name:"reportAssetSpeed"}),At=ri=new $o({name:"reportAssetSpeed",collectCur:0,collectEntryType:"resource",ASSETS_INITIATOR_TYPE:["img","css","script","link","audio","video"],onNewAegis:function(e){var t=this;ni()&&(this.collectSuccessLog(e),this.collectFailLog(e),performance.onresourcetimingbufferfull=function(){t.collectCur=0,performance.clearResourceTimings()})},publish:function(t){this.$walk(function(e){e.speedLogPipeline(t)})},publishMany:function(e,t){for(var n=t.config,r=0,o=e.length;r<o;r++){var i=e[r];-1!==this.ASSETS_INITIATOR_TYPE.indexOf(i.initiatorType)&&-1===i.name.indexOf("cdn-go.cn/aegis/aegis-sdk")&&this.publish(this.generateLog(i,n))}},collectSuccessLog:function(n){var e,t,r=this;"function"==typeof window.PerformanceObserver?(this.publishMany(performance.getEntriesByType(this.collectEntryType),n),(e=new window.PerformanceObserver(function(e){r.publishMany(e.getEntries(),n)})).observe({entryTypes:[this.collectEntryType]}),n.lifeCycle.on("destroy",function(){0===ri.countInstance()&&e.disconnect()})):(t=setInterval(function(){var e=performance.getEntriesByType(r.collectEntryType),t=e.slice(r.collectCur);r.collectCur=e.length,r.publishMany(t,n)},3e3),n.lifeCycle.on("destroy",function(){0===ri.countInstance()&&clearInterval(t)}))},collectFailLog:function(e){var r=this,o=e.config,t=function(e){var t,n;e&&(e=e.target||e.srcElement,t=(null==e?void 0:e.src)||(null==e?void 0:e.href),e=null==e?void 0:e.tagName,t&&"string"==typeof t&&("IMG"===e&&-1<window.location.href.indexOf(t)||(e="function"==typeof(null===(e=o.api)||void 0===e?void 0:e.resourceTypeHandler)?null===(n=o.api)||void 0===n?void 0:n.resourceTypeHandler(t):"",n=performance.getEntriesByType(r.collectEntryType).find(function(e){return e.name===t}),e={url:io(t),status:400,duration:Number(((null==n?void 0:n.duration)||0).toFixed(2)),method:"get",type:e||"static",isHttps:ao(t),urlQuery:io(t,!0),domainLookup:0,connectTime:0},r.publish(e))))};window.document.addEventListener("error",t,!0),e.lifeCycle.on("destroy",function(){0===ri.countInstance()&&window.document.removeEventListener("error",t,!0)})},generateLog:function(e,t){var n,r="function"==typeof(null===(n=t.api)||void 0===n?void 0:n.resourceTypeHandler)?null===(r=t.api)||void 0===r?void 0:r.resourceTypeHandler(e.name):"";return{url:io(e.name),method:"get",duration:Number(e.duration.toFixed(2)),status:200,type:r||"static",isHttps:ao(e.name),urlQuery:io(e.name,!0),domainLookup:oo(e.domainLookupEnd-e.domainLookupStart),connectTime:oo(e.connectEnd-e.connectStart)}},collectNotReportedLog:function(e){var t=performance.getEntriesByType(this.collectEntryType),n=t.length;"function"!=typeof window.PerformanceObserver&&this.collectCur!==n&&(t=t.slice(this.collectCur),this.collectCur=n,this.publishMany(t,e,!0))},destroy:function(){this.option.publish=function(){}}}),oi=Y.findIndex,ii=!0;"findIndex"in[]&&Array(1).findIndex(function(){ii=!1}),Le({target:"Array",proto:!0,forced:ii},{findIndex:function(e){return oi(this,e,1<arguments.length?arguments[1]:undefined)}}),Ye("findIndex");var ai,n=f.Promise,xn=De("species"),Tt=/(?:iphone|ipod|ipad).*applewebkit/i.test(B),ui=f.location,dt=f.setImmediate,e=f.clearImmediate,ci=f.process,Sn=f.MessageChannel,si=f.Dispatch,fi=0,li={},di=function(e){var t;li.hasOwnProperty(e)&&(t=li[e],delete li[e],t())},pi=function(e){return function(){di(e)}},Y=function(e){di(e.data)},Ye=function(e){f.postMessage(e+"",ui.protocol+"//"+ui.host)};dt&&e||(dt=function(e){for(var t=[],n=1;n<arguments.length;)t.push(arguments[n++]);return li[++fi]=function(){("function"==typeof e?e:Function(e)).apply(undefined,t)},ai(fi),fi},e=function(e){delete li[e]},Oo?ai=function(e){ci.nextTick(pi(e))}:si&&si.now?ai=function(e){si.now(pi(e))}:Sn&&!Tt?(Oi=(Sn=new Sn).port2,Sn.port1.onmessage=Y,ai=Ae(Oi.postMessage,Oi,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts&&ui&&"file:"!==ui.protocol&&!s(Ye)?(ai=Ye,f.addEventListener("message",Y,!1)):ai="onreadystatechange"in O("script")?function(e){Ge.appendChild(O("script")).onreadystatechange=function(){Ge.removeChild(this),di(e)}}:function(e){setTimeout(pi(e),0)});var hi,gi,vi,yi,mi,wi,bi,Ei,Oi={set:dt,clear:e},Ye=/web0s(?!.*chrome)/i.test(B),Y=T.f,xi=Oi.set,dt=f.MutationObserver||f.WebKitMutationObserver,e=f.document,Si=f.process,B=f.Promise,Y=Y(f,"queueMicrotask"),Y=Y&&Y.value;Y||(hi=function(){var e,t;for(Oo&&(e=Si.domain)&&e.exit();gi;){t=gi.fn,gi=gi.next;try{t()}catch(Wa){throw gi?yi():vi=undefined,Wa}}vi=undefined,e&&e.enter()},yi=Tt||Oo||Ye||!dt||!e?B&&B.resolve?((bi=B.resolve(undefined)).constructor=B,Ei=bi.then,function(){Ei.call(bi,hi)}):Oo?function(){Si.nextTick(hi)}:function(){xi.call(f,hi)}:(mi=!0,wi=e.createTextNode(""),new dt(hi).observe(wi,{characterData:!0}),function(){wi.data=mi=!mi}));var Ri,Ti,Pi,Li,Ii=Y||function(e){e={fn:e,next:undefined};vi&&(vi.next=e),gi||(gi=e,yi()),vi=e},Ai=function(e){var n,r;this.promise=new e(function(e,t){if(n!==undefined||r!==undefined)throw TypeError("Bad Promise constructor");n=e,r=t}),this.resolve=Ie(n),this.reject=Ie(r)},Ci={f:function(e){return new Ai(e)}},ji=function(e){try{return{error:!1,value:e()}}catch(Wa){return{error:!0,value:Wa}}},ki="object"==typeof window,Ni=Oi.set,_i=De("species"),Ui="Promise",Mi=ee.get,Di=ee.set,Fi=ee.getterFor(Ui),dt=n&&n.prototype,qi=n,Y=dt,Wi=f.TypeError,Hi=f.document,Bi=f.process,Gi=Ci.f,Vi=Gi,$i=!!(Hi&&Hi.createEvent&&f.dispatchEvent),Xi="function"==typeof PromiseRejectionEvent,Qi=!1,Oi=Te(Ui,function(){var e=H(qi)!==String(qi);if(!e&&66===ke)return!0;if(51<=ke&&/native code/.test(qi))return!1;var t=new qi(function(e){e(1)}),n=function(e){e(function(){},function(){})};return(t.constructor={})[_i]=n,!(Qi=t.then(function(){})instanceof n)||!e&&ki&&!Xi}),K=Oi||!K(function(e){qi.all(e)["catch"](function(){})}),Ji=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},Ki=function(l,d){var p;l.notified||(l.notified=!0,p=l.reactions,Ii(function(){for(var e=l.value,t=1==l.state,n=0;p.length>n;){var r,o,i,a=p[n++],u=t?a.ok:a.fail,c=a.resolve,s=a.reject,f=a.domain;try{u?(t||(2===l.rejection&&ea(l),l.rejection=1),!0===u?r=e:(f&&f.enter(),r=u(e),f&&(f.exit(),i=!0)),r===a.promise?s(Wi("Promise-chain cycle")):(o=Ji(r))?o.call(r,c,s):c(r)):s(e)}catch(Wa){f&&!i&&f.exit(),s(Wa)}}l.reactions=[],l.notified=!1,d&&!l.rejection&&Yi(l)}))},zi=function(e,t,n){var r,o;$i?((r=Hi.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),f.dispatchEvent(r)):r={promise:t,reason:n},!Xi&&(o=f["on"+e])?o(r):"unhandledrejection"===e&&function(e,t){var n=f.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Yi=function(r){Ni.call(f,function(){var e,t=r.facade,n=r.value;if(Zi(r)&&(e=ji(function(){Oo?Bi.emit("unhandledRejection",n,t):zi("unhandledrejection",t,n)}),r.rejection=Oo||Zi(r)?2:1,e.error))throw e.value})},Zi=function(e){return 1!==e.rejection&&!e.parent},ea=function(t){Ni.call(f,function(){var e=t.facade;Oo?Bi.emit("rejectionHandled",e):zi("rejectionhandled",e,t.value)})},ta=function(t,n,r){return function(e){t(n,e,r)}},na=function(e,t,n){e.done||(e.done=!0,(e=n?n:e).value=t,e.state=2,Ki(e,!0))},ra=function(t,n,e){if(!t.done){t.done=!0,e&&(t=e);try{if(t.facade===n)throw Wi("Promise can't be resolved itself");var r=Ji(n);r?Ii(function(){var e={done:!1};try{r.call(n,ta(ra,e,t),ta(na,e,t))}catch(Wa){na(e,Wa,t)}}):(t.value=n,t.state=1,Ki(t,!1))}catch(Wa){na({done:!1},Wa,t)}}};if(Oi&&(Y=(qi=function(e){Wt(this,qi,Ui),Ie(e),Ri.call(this);var t=Mi(this);try{e(ta(ra,t),ta(na,t))}catch(Wa){na(t,Wa)}}).prototype,(Ri=function(e){Di(this,{type:Ui,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:undefined})}).prototype=tn(Y,{then:function(e,t){var n=Fi(this),r=Gi(Sr(this,qi));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Oo?Bi.domain:undefined,n.parent=!0,n.reactions.push(r),0!=n.state&&Ki(n,!1),r.promise},"catch":function(e){return this.then(undefined,e)}}),Ti=function(){var e=new Ri,t=Mi(e);this.promise=e,this.resolve=ta(ra,t),this.reject=ta(na,t)},Ci.f=Gi=function(e){return e===qi||e===Pi?new Ti:Vi(e)},"function"==typeof n&&dt!==Object.prototype)){Li=dt.then,Qi||(te(dt,"then",function(e,t){var n=this;return new qi(function(e,t){Li.call(n,e,t)}).then(e,t)},{unsafe:!0}),te(dt,"catch",Y["catch"],{unsafe:!0}));try{delete dt.constructor}catch(Wa){}mt&&mt(dt,Y)}Le({global:!0,wrap:!0,forced:Oi},{Promise:qi}),gt(qi,Ui,!1),dt=oe("Promise"),Y=I.f,d&&dt&&!dt[xn]&&Y(dt,xn,{configurable:!0,get:function(){return this}}),Pi=oe(Ui),Le({target:Ui,stat:!0,forced:Oi},{reject:function(e){var t=Gi(this);return t.reject.call(undefined,e),t.promise}}),Le({target:Ui,stat:!0,forced:Oi},{resolve:function(e){return function(e,t){if(P(e),v(t)&&t.constructor===e)return t;e=Ci.f(e);return(0,e.resolve)(t),e.promise}(this,e)}}),Le({target:Ui,stat:!0,forced:K},{all:function(e){var u=this,t=Gi(u),c=t.resolve,s=t.reject,n=ji(function(){var r=Ie(u.resolve),o=[],i=0,a=1;qt(e,function(e){var t=i++,n=!1;o.push(undefined),a++,r.call(u,e).then(function(e){n||(n=!0,o[t]=e,--a||c(o))},s)}),--a||c(o)});return n.error&&s(n.value),t.promise},race:function(e){var n=this,r=Gi(n),o=r.reject,t=ji(function(){var t=Ie(n.resolve);qt(e,function(e){t.call(n,e).then(r.resolve,o)})});return t.error&&o(t.value),r.promise}});var oa,ia,aa=!1,ua=[],ca=function(t){var n,r;ua.find(function(e){return e.name===t.name})||(ua.push(t),aa||!window.XMLHttpRequest)||(aa=!0,n=window.XMLHttpRequest.prototype.send,r=window.XMLHttpRequest.prototype.open,window.XMLHttpRequest.prototype.open=function(){if(this.aegisMethod=arguments[0],this.aegisUrl=arguments[1],this.aegisXhrStartTime=Date.now(),!this.sendByAegis)for(var e=0;e<ua.length;e++){var t=ua[e];try{"function"==typeof t.open&&t.open(this)}catch(f){}}return r.apply(this,arguments)},window.XMLHttpRequest.prototype.send=function(){if(!this.sendByAegis)for(var e=0;e<ua.length;e++){var t=ua[e];try{"function"==typeof t.send&&t.send(this,arguments[0])}catch(f){}}return n.apply(this,arguments)})},sa=function(t){var e=ua.findIndex(function(e){return e.name===t.name});-1!==e&&ua.splice(e,1)},fa=!1,la=[],Y=(new $o({name:"reportApiSpeed"}),new $o({name:"reportApiSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideFetch(e.config),this.overrideXhr(e.config))},overrideFetch:function(f){var l=this,e={name:this.name,then:function(i,a,u,c){var e,s,t,n;f.hostUrl&&-1<u.indexOf(f.hostUrl)||(s={url:i.url,isHttps:ao(i.url),method:(null==c?void 0:c.method)||"get",duration:a,type:"fetch",status:i.status||0},"fetch"!==(n="function"==typeof(null===(e=f.api)||void 0===e?void 0:e.resourceTypeHandler)?null===(t=f.api)||void 0===t?void 0:t.resourceTypeHandler(i.url):n)&&"static"!==n&&(t=i.headers?i.headers.get("content-type"):"",n=i.ok&&"string"==typeof t&&co(t)?"static":"fetch"),"fetch"===n?i.clone().text().then(function(e){var t=null===(o=f.api)||void 0===o?void 0:o.apiDetail,n=i.status<=0||400<=i.status,r=fo(e,f.api,{url:u,ctx:i}),o=r.code,r=r.isErr,t=(n?"FETCH_ERROR: "+e+" \n\n":"")+"req url: "+u+" \n                                \nreq method: "+((null==c?void 0:c.method)||"get")+" \n                                \nreq param: "+(t?go(null==c?void 0:c.body):"")+" \n                                \nres duration: "+a+"ms \n                                \nres status: "+(i.status||0)+" \n                                \nres retcode: "+o+"\n                                \nres data: "+(t?e:"");s.payload=new wo(i,e),s.ret=o,s.isErr=+r,l.publishNormalLog({msg:t,level:n?to.AJAX_ERROR:r?to.RET_ERROR:to.API_RESPONSE,code:o,ctx:i})}):Object.assign(s,{type:"static",urlQuery:io(i.url,!0),domainLookup:zr.number,connectTime:zr.number}),l.publishSpeed(s))},"catch":function(e,t,n,r){if(!(f.hostUrl&&-1<n.indexOf(f.hostUrl))){var o={url:n,isHttps:ao(n),method:(null==r?void 0:r.method)||"get",duration:t,type:"fetch",status:0};l.publishSpeed(o);o=null===(o=f.api)||void 0===o?void 0:o.apiDetail,r="AJAX_ERROR: "+e+"\n                          \nres status: 0\n                          \nres duration: "+t+"ms\n                          \nreq url: "+n+"\n                          \nreq method: "+((null==r?void 0:r.method)||"get")+"\n                          \nreq param: "+(o?go(null==r?void 0:r.body):"");throw l.publishNormalLog({msg:r,level:to.AJAX_ERROR,code:-400,ctx:e}),e}}};this.hackFetchOptions=e,function(t){if(la.find(function(e){return e.name===t.name}))throw new Error("name '"+t.name+"' is already in hackFetch option list");var a;la.push(t),!fa&&window.fetch&&(fa=!0,a=window.fetch,window.fetch=function(e,r){void 0===r&&(r={});for(var o="string"==typeof e?e:e.url,t=0;t<la.length;t++){var n=la[t];try{"function"==typeof n.beforeFetch&&n.beforeFetch(o,r)}catch(u){}}var i=Date.now();return a(e,r).then(function(e){for(var t=0;t<la.length;t++){var n=la[t];try{"function"==typeof n.then&&n.then(e,Date.now()-i,o,r)}catch(u){}}return e})["catch"](function(e){for(var t=0;t<la.length;t++){var n=la[t];try{"function"==typeof n["catch"]&&n["catch"](e,Date.now()-i,o,r)}catch(u){}}throw e})})}(this.hackFetchOptions)},getRequestType:function(e,t,n){var r,o="function"==typeof(null===(r=e.api)||void 0===r?void 0:r.resourceTypeHandler)?null===(o=e.api)||void 0===o?void 0:o.resourceTypeHandler(n):"";return"fetch"!==o&&"static"!==o&&(n=t.getResponseHeader("content-type"),o=400<=t.status||"string"!=typeof n||!co(n)?"fetch":"static"),o},overrideXhr:function(d){var p=this,e={name:this.name,send:function(s,f){var l=Date.now();s.addEventListener("loadend",function(){var e,t=s.aegisUrl;if(t&&!(d.hostUrl&&-1<t.indexOf(d.hostUrl))){var n=Date.now()-l,r={url:t,isHttps:ao(t),status:s.status||0,method:s.aegisMethod||"get",type:"fetch",duration:n,payload:new mo(s)};if("fetch"===p.getRequestType(d,s,t))try{var o=null===(e=d.api)||void 0===e?void 0:e.apiDetail,i=fo(s.response,d.api,{url:t,ctx:s}),a=i.code,u=i.isErr,c="req url: "+t+" \n                                \nreq method: "+r.method+" \n                                \nreq param: "+(o?go(f):"")+" \n                                \nres duration: "+n+"ms \n                                \nres status: "+r.status+" \n                                \nres retcode: "+a+"\n                                \nres data: "+(o?go(s.response):"");r.ret=a,r.isErr=+u,p.publishNormalLog({msg:c,level:u?to.RET_ERROR:to.API_RESPONSE,code:a,ctx:s})}catch(y){r.ret="unknown"}else Object.assign(r,{type:"static",urlQuery:io(t,!0),domainLookup:zr.number,connectTime:zr.number});p.publishSpeed(r)}})}};this.hackXHROptions=e,ca(this.hackXHROptions)},publishSpeed:function(n){var r=this;n.url=io(n.url),this.$walk(function(e){var t=r.$getConfig(e);"fetch"===n.type&&t&&"function"==typeof t.urlHandler?e.speedLogPipeline(Yn(Yn({},n),{url:encodeURIComponent(t.urlHandler(n.url,n.payload))})):e.speedLogPipeline(n)})},publishNormalLog:function(t){this.$walk(function(e){e.normalLogPipeline(t)})},destroy:function(){var t,e;this.option.publishSpeed=function(){},this.option.publishNormalLog=function(){},this.option.hackXHROptions&&sa(this.option.hackXHROptions),this.option.hackFetchOptions&&(t=this.option.hackFetchOptions,-1!==(e=la.findIndex(function(e){return e.name===t.name}))&&la.splice(e,1))}}));pe("match",1,function(r,c,s){return[function(e){var t=y(this),n=e==undefined?undefined:e[r];return n!==undefined?n.call(e,t):new RegExp(e)[r](String(t))},function(e){var t=s(c,e,this);if(t.done)return t.value;var n=P(e),r=String(this);if(!n.global)return br(n,r);for(var o=n.unicode,i=[],a=n.lastIndex=0;null!==(u=br(n,r));){var u=String(u[0]);""===(i[a]=u)&&(n.lastIndex=gr(r,se(n.lastIndex),o)),a++}return 0===a?null:i}]}),(dt=oa=oa||{})[dt.unknown=100]="unknown",dt[dt.wifi=1]="wifi",dt[dt.net2g=2]="net2g",dt[dt.net3g=3]="net3g",dt[dt.net4g=4]="net4g",dt[dt.net5g=5]="net5g",dt[dt.net6g=6]="net6g",(xn=ia=ia||{})[xn.android=1]="android",xn[xn.ios=2]="ios",xn[xn.windows=3]="windows",xn[xn.macos=4]="macos",xn[xn.linux=5]="linux",xn[xn.other=100]="other";var da,pa,ha,ga,va,ya,ma,wa,ba,Ea,Oa,xa,oe=new $o({name:"device",onNewAegis:function(e){e.extendBean("platform",this.getPlatform()),e.extendBean("netType",oa.unknown),this.getDpi(e),this.refreshNetworkTypeToBean(e)},getDpi:function(e){e.extendBean("vp",Math.round(window.innerWidth)+" * "+Math.round(window.innerHeight)),window.screen&&e.extendBean("sr",Math.round(window.screen.width)+" * "+Math.round(window.screen.height))},getPlatform:function(){var t={android:/\bAndroid\s*([^;]+)/,ios:/\b(iPad|iPhone|iPod)\b.*? OS ([\d_]+)/,windows:/\b(Windows NT)/,macos:/\b(Mac OS)/,linux:/\b(Linux)/i},e=Object.keys(t).find(function(e){return t[e].test(navigator.userAgent)});return e?ia[e]:ia.other},refreshNetworkTypeToBean:function(t){var n=this,e=t.config;e&&("function"==typeof e.getNetworkType?e.getNetworkType:Sa)(function(e){oa[e]||(e=oa.unknown),t.extendBean("netType",e),n.NetworkRefreshTimer=setTimeout(function(){n.refreshNetworkTypeToBean(t),clearTimeout(n.NetworkRefreshTimer)},1e4)})}}),Sa=function(e){var t="",n=navigator.userAgent.match(/NetType\/(\w+)/);n?t=n[1]:navigator.connection&&(t=navigator.connection.effectiveType||navigator.connection.type),e((t=t=t||"unknown",0<=(t=String(t).toLowerCase()).indexOf("4g")?oa.net4g:0<=t.indexOf("wifi")?oa.wifi:0<=t.indexOf("5g")?oa.net5g:0<=t.indexOf("6g")?oa.net6g:0<=t.indexOf("3g")?oa.net3g:0<=t.indexOf("2g")?oa.net2g:oa.unknown))},Ra=window.WebSocket,Ta=[],Pa={construct:function(e,t){var a=new e(t[0],t[1]);return a.originSend=a.send,a.addEventListener("error",function(e){var e=(null==e?void 0:e.currentTarget)||{},t=e.url,n=e.readyState;null==Ta||Ta.forEach(function(e){e=e.onErr;null==e||e({msg:"无法获知具体错误信息，需在浏览器控制台查看！",readyState:n,connectUrl:t})})}),Object.defineProperty(a,"send",{get:function(){return function(e){null===(o=a.originSend)||void 0===o||o.call(a,e);var t=a.readyState,n=WebSocket.OPEN,r=WebSocket.CLOSED,o=WebSocket.CONNECTING,e=WebSocket.CLOSING;if(t!==n){var i={readyState:t,connectUrl:a.url};switch(t){case r:Ta.forEach(function(e){e=e.sendErr;null==e||e(Yn({msg:"消息发送失败，连接已关闭！"},i))});break;case o:Ta.forEach(function(e){(0,e.sendErr)(Yn({msg:"消息发送失败，正在连接中！"},i))});break;case e:Ta.forEach(function(e){(0,e.sendErr)(Yn({msg:"消息发送失败，连接正在关闭！"},i))})}}}}}),a}},La=new $o({name:"onError"}),Oi=La=new $o({name:"onError",onNewAegis:function(e){this.startListen(e)},startListen:function(i){var r=this,n=window.onerror;window.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.publishErrorLog({msg:(po(e[0])||"")+" @ ("+(po(e[1])||"")+":"+(e[2]||0)+":"+(e[3]||0)+")\n          \n"+po(e[4]||""),level:to.ERROR}),null==n||n.call.apply(n,Zn([window],e))};var e=function(e){e=e&&po(e.reason);r.publishErrorLog({msg:"PROMISE_ERROR: "+e,level:to.PROMISE_ERROR})};window.addEventListener("unhandledrejection",e);var t=function(e){var t=(null==e?void 0:e.target)||(null==e?void 0:e.srcElement);if(t){e=t.src||t.href,t=t.tagName;if("string"==typeof e&&t&&!(-1<window.location.href.indexOf(e))){var n={msg:t+" load fail: "+e,level:to.INFO};if(/\.js$/.test(e))n.level=to.SCRIPT_ERROR;else if(/\.css$/.test(e))n.level=to.CSS_ERROR;else switch(t.toLowerCase()){case"script":n.level=to.SCRIPT_ERROR;break;case"link":n.level=to.CSS_ERROR;break;case"img":n.level=to.IMAGE_ERROR;break;case"audio":case"video":n.level=to.MEDIA_ERROR;break;default:return}r.publishErrorLog(n)}}};window.document.addEventListener("error",t,!0),i.lifeCycle.on("destroy",function(){0===La.countInstance()&&(window.document.removeEventListener("unhandledrejection",e),window.document.removeEventListener("error",t,!0))});var o,a,u,c=this,s={name:this.name,send:function(r,o){r.addEventListener("loadend",function(){var e,t,n="";this.failType?n=this.failType:this.status?400<=this.status&&(n="error"):n="failed",i.config.hostUrl&&this.aegisUrl&&-1<this.aegisUrl.indexOf(i.config.hostUrl)||(t=null===(e=i.config.api)||void 0===e?void 0:e.apiDetail,n&&(e=r.aegisUrl,e=fo(r.response,i.config.api,{url:e,ctx:r}).code,c.publishErrorLog({msg:"AJAX_ERROR: request "+n+"\n                      \nreq url: "+this.aegisUrl+"\n                      \nres status: "+(this.status||0)+"\n                      \nres retcode: "+e+"\n                      \nres duration: "+(Date.now()-r.aegisXhrStartTime)+"ms\n                      \nreq method: "+this.aegisMethod+"\n                      \nreq param: "+(t?go(o):"")+"\n                      \nres data: "+(t?null===(t=(t=r).responseType&&"text"!==t.responseType?"":t.responseText)||void 0===t?void 0:t.slice(0,1e3):""),level:to.AJAX_ERROR,ctx:r})))}),r.addEventListener("timeout",function(){r.failType="timeout"}),r.addEventListener("error",function(){r.failType="error"}),r.addEventListener("abort",function(){r.failType="abort"})}};this.hackXHROptions=s,ca(this.hackXHROptions),i.config.websocketHack&&(a={key:i.config.id+"-"+this.name,onErr:function(e){var t;null===(t=r.publishWsErrorLog)||void 0===t||t.call(r,e)},sendErr:function(e){var t;null===(t=r.publishWsErrorLog)||void 0===t||t.call(r,e)}},this.hackWebsocketConfig=a,o=this.hackWebsocketConfig,window.Proxy&&window.WebSocket&&(s=window.WebSocket,window&&!s.isHack&&(a=new Proxy(WebSocket,Pa),s.isHack=!0,window.WebSocket=a),u=o,Ta.find(function(e){return e.key===u.key})||u&&Ta.push(u)))},publishErrorLog:function(t){this.$walk(function(e){e.normalLogPipeline(t)})},publishWsErrorLog:function(e){var t=e.connectUrl,n=e.msg,e=e.readyState;this.publishErrorLog({msg:"WEBSOCKET_ERROR: \n              connect: "+t+"\n              readyState: "+e+"\n              msg: "+n,level:to.WEBSOCKET_ERROR})},destroy:function(){this.option.publishErrorLog=function(){},this.option.hackXHROptions&&sa(this.option.hackXHROptions),this.option.hackWebsocketConfig&&function(t){window.WebSocket=Ra;var e=Ta.findIndex(function(e){return e.key===t.key});-1!==e&&Ta.splice(e,1)}(this.option.hackWebsocketConfig)}}),Ia=(new $o({name:"pagePerformance"}),function(e,t,n,r){return void 0===n&&(n=15e3),void 0===r&&(r=0),(t=void 0===t?0:t)<=e&&e<=n?e:r}),K=new $o({name:"pagePerformance",onNewAegis:function(n){var r=this;if(ni())if(da)this.publish(da,n);else try{this.getFirstScreenTiming(n,function(e){var t=performance.timing;t&&(da={dnsLookup:Ia(t.domainLookupEnd-t.domainLookupStart),tcp:Ia(t.connectEnd-t.connectStart),ssl:Ia(0===t.secureConnectionStart?0:t.requestStart-t.secureConnectionStart),ttfb:Ia(t.responseStart-t.requestStart),contentDownload:Ia(t.responseEnd-t.responseStart),domParse:Ia(t.domInteractive-t.domLoading),resourceDownload:Ia(t.loadEventStart-t.domInteractive,0,15e3,1070),firstScreenTiming:Ia(Math.floor(e),0,6e4)},r.publish(da,n))})}catch(o){}},publish:function(e,a){var u=this;a.sendPipeline([function(e,t){var n,r=[];for(n in e)r.push(n+"="+e[n]);var o=u.$getConfig(a);if(o){var i=-1===a.config.performanceUrl.indexOf("?")?"?":"&";return"function"==typeof o.urlHandler?t({url:a.config.performanceUrl+i+r.join("&")+"&from="+(encodeURIComponent(o.urlHandler())||window.location.href),beanFilter:["from"],type:no.PERFORMANCE,log:e}):t({url:a.config.performanceUrl+i+r.join("&"),type:no.PERFORMANCE,log:e})}}],no.PERFORMANCE)(e)},getFirstScreenTiming:function(e,t){null==t||t(0)},isEleInArray:function(e,t){return!(!e||e===document.documentElement)&&(-1!==t.indexOf(e)||this.isEleInArray(e.parentElement,t))},isInFirstScreen:function(e){if(!e||"function"!=typeof e.getBoundingClientRect)return!1;var t=e.getBoundingClientRect(),n=window.innerHeight,e=window.innerWidth;return 0<=t.left&&t.left<e&&0<=t.top&&t.top<n&&0<t.width&&0<t.height},walkAndCount:function(e){var t=0;if(e&&1===e.nodeType){t+=1;var n=e.children;if(null!=n&&n.length)for(var r=0;r<n.length;r++)t+=this.walkAndCount(n[r])}return t}});ya={passive:!0,capture:!0},ma=new Date,pe=function(){va=[],ha=-1,pa=null,Oa(addEventListener)},wa=function(e,t){pa||(pa=t,ha=e,ga=new Date,Oa(removeEventListener),ba())},ba=function(){var t;0<=ha&&ha<ga-ma&&(t={entryType:"first-input",name:pa.type,target:pa.target,cancelable:pa.cancelable,startTime:pa.timeStamp,processingStart:pa.timeStamp+ha},va.forEach(function(e){e(t)}),va=[])},Ea=function(e){var t,n,r,o,i,a;e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,"pointerdown"==e.type?(n=t,r=e,o=function(){wa(n,r),a()},i=function(){a()},a=function(){removeEventListener("pointerup",o,ya),removeEventListener("pointercancel",i,ya)},addEventListener("pointerup",o,ya),addEventListener("pointercancel",i,ya)):wa(t,e))},Oa=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return t(e,Ea,ya)})},xa="hidden"===document.visibilityState?0:1/0,addEventListener("visibilitychange",function r(e){"hidden"===document.visibilityState&&(xa=e.timeStamp,removeEventListener("visibilitychange",r,!0))},!0),pe(),self.webVitals={firstInputPolyfill:function(e){va.push(e),ba()},resetFirstInputPolyfill:pe,get firstHiddenTime(){return xa}},new $o({name:"webVitals"});var Aa,Ca,ja=0,ka=(zn(Ca=Fa,dt=Aa=bn),Ca.prototype=null===dt?Object.create(dt):(qa.prototype=dt.prototype,new qa),Fa.prototype.getBean=function(t){var n=this;return void 0===t&&(t=[]),""+Object.getOwnPropertyNames(this.bean).filter(function(e){return-1===t.indexOf(e)}).map(function(e){return e+"="+n.bean[e]}).join("&")},Fa.prototype.resetRequesting=function(){var e;this.sendNow||(this.requesting=!1,(e=this.requestQueue.shift())&&this.request(e.options,e.success,e.fail))},Fa.prototype.request=function(e,t,n){var r=this;if(e&&"string"==typeof e.url&&""!==e.url&&this.bean.id)if(this.sendNow||!this.requesting){this.requesting=!0;var o=e.url;!1!==e.addBean&&(o=o+(-1===o.indexOf("?")?"?":"&")+this.getBean(e.beanFilter)),e.url=o;var i=e.method||"get",o=this.config.onBeforeRequest;if(!(e=o?o(e,this):e))return this.resetRequesting(),console.warn("Sending request blocked");if(!e.url)return this.resetRequesting(),console.warn("Please handle the parameters reasonably, options.url is necessary");if((e.sendBeacon||this.sendNow)&&"function"==typeof navigator.sendBeacon)return this.resetRequesting(),void navigator.sendBeacon(e.url,e.data);var a=new XMLHttpRequest;a.sendByAegis=!0,a.addEventListener("readystatechange",function(){4===a.readyState&&(r.resetRequesting(),400<=a.status||0===a.status?null==n||n(a.response):null==t||t(a.response))}),"get"===i.toLocaleLowerCase()?(a.open("get",function(e,n){if("string"!=typeof e)return"";if("object"===Mn(n)&&n){var t=Object.getOwnPropertyNames(n).map(function(e){var t=n[e];return e+"="+("string"==typeof t?encodeURIComponent(t):encodeURIComponent(JSON.stringify(t)))}).join("&").replace(/eval/gi,"evaI");return e+(-1===e.indexOf("?")?"?":"&")+t}return e}(e.url,e.data)),a.send()):(a.open("post",e.url),e.contentType&&a.setRequestHeader("Content-Type",e.contentType),"string"==typeof e.data&&(e.data=e.data.replace(/eval/gi,"evaI")),a.send(e.data))}else this.requestQueue.push({options:e,success:t,fail:n})},Fa.useAsyncPlugin=function(a,e){var u,c=void 0===(u=(e=void 0===e?{}:e).exportsConstructor)?"aegis-plugin-"+ja:u,t=e.onAegisInit,s=void 0===t?function(){}:t,e=e.onAegisInitAndPluginLoaded,f=void 0===e?function(){}:e;if(ja+=1,"string"!=typeof a)throw new TypeError("useAsyncPlugin first param must be string");if("function"!=typeof s||"function"!=typeof f)throw new TypeError("onAegisInit and onAegisInitAndPluginLoaded must be function");this.use(new $o({name:"asyncPlugin",onNewAegis:function(t){try{s(t),Fa.asyncPlugin[a]?f(t,window[Fa.asyncPlugin[a]]):(e=a,n=c,r=function(e){e||(Fa.asyncPlugin[a]=c,e=window[c],f(t,e))},o=document.createElement("script"),i=document.head,"function"==typeof n&&(r=n,n=""),o.src=e,o.setAttribute("name",n),o.name=n,o.setAttribute("crossorigin","anonymous"),o.crossorigin="anonymous",o.defer=!0,o.hasLoaded=!1,o.onreadystatechange=function(){o.hasLoaded||o.readyState&&"loaded"!==o.readyState&&"complete"!==o.readyState||(o.hasLoaded=!0,"function"==typeof r&&r(!1),setTimeout(function(){i.contains(o)&&i.removeChild(o)}))},o.onload=o.onreadystatechange,o.onerror=function(){"function"==typeof r&&r(!0),setTimeout(function(){i.contains(o)&&i.removeChild(o)})},"complete"===document.readyState?i.appendChild(o):window.addEventListener("load",function(){i.appendChild(o)}))}catch(u){console.log("error on below is caused by "+a+" "),console.error(u)}var e,n,r,o,i}}))},Fa.prototype.publishPluginsLogs=function(){var e=Fa.installedPlugins.find(function(e){return"reportAssetSpeed"===e.name});null==e||e.option.collectNotReportedLog(this)},Fa.prototype.publishLogsQueue=function(){var t=this;this.sendNow=!0,this.requestQueue.forEach(function(e){e.option&&(e.option=Yn(Yn({},e.option),{sendBeacon:!0})),t.request(e)}),this.requestQueue=[]},Fa.prototype.uploadLogs=function(e,t){this.lifeCycle.emit("uploadLogs",e=void 0===e?{}:e,t=void 0===t?{}:t)},Fa.sessionID="session-"+Date.now(),Fa.asyncPlugin={},Fa.urls={aegisCollect:"https://aegis.qq.com/collect",flog:"https://cdn-go.cn/vasdev/web_webpersistance_v2/v1.8.2/flog.core.min.js",shadowLog:""},Fa),Na=new $o({name:"offlineLog"}),_a=function(e,h){var g=[],v=null,y=null,m=function(e){y=e},w=function(e){g=g.concat(e)},b=function(e,t){v={conds:e=void 0===e?{}:e,params:t=void 0===t?{}:t}};ka.useAsyncPlugin(e,{exportsConstructor:"Flog",onAegisInit:function(e){e.lifeCycle.on("beforeWrite",w),e.lifeCycle.on("uploadLogs",b),e.lifeCycle.on("onConfigChange",m)},onAegisInitAndPluginLoaded:function(r,e){var t,n,o,i,a,u=h.dbConfig,c=void 0===u?{}:u,s=h.url,f=void 0===s?ka.urls.aegisCollect:s,l=h.offlineLogExp,d=void 0===l?3:l,u=h.id,s=h.uin;null===(l=r.lifeCycle)||void 0===l||l.remove("beforeWrite",w),null===(l=r.lifeCycle)||void 0===l||l.remove("uploadLogs",b),null===(l=r.lifeCycle)||void 0===l||l.remove("onConfigChange",m);c=Object.assign({lookupUrl:f+"/offlineAuto?id="+u,preservedDay:d,id:u,uin:s,aid:(null===(s=r.bean)||void 0===s?void 0:s.aid)||"",beforeRequest:r.config.beforeRequest,afterRequest:r.config.afterRequest},c,{sessionId:ka.sessionID});try{var p=new e(c);g.forEach(function(e){p.add(Yn(Yn({},e),{level:e.level===to.INFO_ALL?to.INFO:e.level}))}),null===(t=r.lifeCycle)||void 0===t||t.on("beforeWrite",function(e){(e=void 0===e?[]:e).forEach(function(e){p.add(Yn(Yn({},e),{level:e.level===to.INFO_ALL?to.INFO:e.level}))})}),null===(n=r.lifeCycle)||void 0===n||n.on("uploadLogs",function(e,t){var n;void 0===e&&(e={}),void 0===t&&(t={}),p.uploadLogs(Object.assign({id:h.id,uin:h.uin,aid:null===(n=r.bean)||void 0===n?void 0:n.aid},e),t)}),null===(o=r.lifeCycle)||void 0===o||o.on("onConfigChange",function(e){p.setConfig(e)}),null===(i=r.lifeCycle)||void 0===i||i.on("destroy",function(){0===Na.countInstance()&&(g.length=0,"function"==typeof((v=null)==p?void 0:p.destroy)&&p.destroy())}),p.on("PERREVENT",function(e){r.sendPipeline([function(e,t){var n=(n={msg:po(e),level:to.INFO},(n=Array.isArray(n)?n:[n]).map(function(t,n){return Object.getOwnPropertyNames(t).map(function(e){return Zr(e)+"["+n+"]="+(t[e]===undefined?"":Zr(t[e]))}).join("&")}).join("&")+(n.length?"&count="+n.length:""));t({type:no.OFFLINE,data:n,contentType:"application/x-www-form-urlencoded",method:"post",addBean:!1,url:h.url+"?id=893&sessionId="+ka.sessionID+"&uin="+h.uin+"&from="+h.id+"&count=1&version=1.35.26",log:e})}],no.OFFLINE)(e)}),y&&(p.setConfig(y),y=null),v&&(null===(a=r.lifeCycle)||void 0===a||a.emit("uploadLogs",v.conds,v.params),v=null),r.flog=p}catch(L){console.log(L)}}})},xn=Na=new $o({name:"offlineLog",onNewAegis:function(e){_a(ka.urls.flog,e.config)}}),pe=(new $o({name:"spa"}),new $o({name:"spa",init:function(){history.pushState=this.wr("pushState")||history.pushState,history.replaceState=this.wr("replaceState")||history.replaceState;var e=(null===(e=location.href)||void 0===e?void 0:e.split("?"))[0];this.$fireUrl=e,this.sendPv=this.sendPv.bind(this),this.onPageChange()},onPageChange:function(){window.addEventListener("replaceState",this.sendPv),window.addEventListener("pushState",this.sendPv),window.addEventListener("popstate",this.sendPv)},wr:function(n){var r=history[n],e="__"+n+"__hasWrittenByTamSpa";return"function"==typeof r&&!history[e]&&(Object.defineProperty(history,e,{value:!0,enumerable:!1}),function(){var e=r.apply(this,arguments),t=null;return"function"==typeof Event?t=new Event(n):(t=document.createEvent("HTMLEvents")).initEvent(n,!1,!0),window.dispatchEvent(t),e})},sendPv:function(){var t=this;setTimeout(function(){var r=location.href,e=(null===(e=location.href)||void 0===e?void 0:e.split("?"))[0];e&&e!==t.$fireUrl&&(t.$walk(function(n){n.sendPipeline([function(e,t){t({url:n.config.pvUrl+"?from="+encodeURIComponent(r),beanFilter:["from"],type:no.PV})}],no.PV)(null)}),t.$fireUrl=e)},0)},destroy:function(){window.removeEventListener("replaceState",this.option.sendPv),window.removeEventListener("pushState",this.option.sendPv),window.removeEventListener("popstate",this.option.sendPv)}})),bn=(new $o({name:"ie"}),new $o({name:"ie",init:function(){this.overrideAegisSend(),this.startListen()},startListen:function(){var n=this,r=window.onerror;window.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.publishErrorLog({msg:(e[0]||"")+" @ ("+(e[1]||"")+":"+(e[2]||0)+":"+(e[3]||0)+")\n          \n"+po(e[4]||""),level:to.ERROR}),null==r||r.call.apply(r,Zn([window],e))}},overrideAegisSend:function(){ka.prototype.request=function(e,t,n){var r,o,i=this;e&&"string"==typeof e.url&&""!==e.url&&this.bean.id&&(!this.requesting||this.sendNow?(this.requesting=!0,r=e.url,!1!==e.addBean&&(r=r+(-1===r.indexOf("?")?"?":"&")+this.getBean(e.beanFilter)),(o=new Image).onload=function(){var e;i.sendNow||(i.requesting=!1,(e=i.requestQueue.shift())&&i.request(e.options,e.success,e.fail)),null==t||t(null)},o.onerror=function(){var e;i.sendNow||(i.requesting=!1,(e=i.requestQueue.shift())&&i.request(e.options,e.success,e.fail)),null==n||n(null)},e.data?o.src=r+"&"+e.data:o.src=r):this.requestQueue.push({options:e,success:t,fail:n}))}},publishErrorLog:function(t){this.$walk(function(e){e.normalLogPipeline(t)})},destroy:function(){this.option.publishErrorLog=function(){},this.requestQueue.length=0}})),Ua=window.navigator.userAgent.toLowerCase(),Ma={},Da=function(e){return-1!==Ua.indexOf(e)};function Fa(e){var t,n,r,i=Aa.call(this,e)||this;i.sendNow=!1,i.requestQueue=[],i.requesting=!1,i.speedLogPipeline=Wo([Po(i),ko(i.config),(r=i,function(t,n){Sa(function(e){r.extendBean("netType",e),n(t)})}),function(e,t){i.lifeCycle.emit("beforeReportSpeed",e);var o=i.config.beforeReportSpeed;if((e="function"==typeof o?e.filter(function(e){var t,n,r=!1!==o(e);return"fetch"===e.type&&e.ret===undefined&&e.payload&&(t=(n=fo(e.payload.data.response,i.config.api,{url:e.payload.data.url,ctx:e.payload.data})||{}).code,n=n.isErr,e.ret=t,e.isErr=+n),r}):e).length)return t(e)},function(e){return i.sendPipeline([function(e,t){t({type:no.SPEED,url:""+i.config.speedUrl,method:"post",data:ti(e,i.bean),log:e})}],no.SPEED)(e)}]),e.asyncPlugin=!0;try{"undefined"!=typeof document&&(e.uin=e.uin||(null!==(t=document.cookie.match(/\buin=\D+(\d*)/))&&void 0!==t?t:[])[1]||(null!==(n=document.cookie.match(/\bilive_uin=\D*(\d+)/))&&void 0!==n?n:[])[1]||""),i.init(e),i.extendBean("sessionId",Fa.sessionID),i.extendBean("from",encodeURIComponent(e.pageUrl||location.href)),"undefined"!=typeof document&&i.extendBean("referer",encodeURIComponent(document.referrer||"")),e.ext1&&i.extendBean("ext1",encodeURIComponent(e.ext1)),e.ext2&&i.extendBean("ext2",encodeURIComponent(e.ext2)),e.ext3&&i.extendBean("ext3",encodeURIComponent(e.ext3))}catch(u){console.warn(u),console.log("%cThe above error occurred in the process of initializing Aegis, which will affect your normal use of Aegis.\nIt is recommended that you contact us for feedback and thank you for your support.","color: red"),i.sendSDKError(u)}return i}function qa(){this.constructor=Ca}Ma.macos=function(){return Da("mac")},Ma.ios=function(){return Ma.iphone()||Ma.ipod()||Ma.ipad()},Ma.iphone=function(){return!Ma.windows()&&Da("iphone")},Ma.ipod=function(){return Da("ipod")},Ma.ipad=function(){var e="MacIntel"===navigator.platform&&1<navigator.maxTouchPoints;return Da("ipad")||e},Ma.android=function(){return!Ma.windows()&&Da("android")},Ma.androidPhone=function(){return Ma.android()&&Da("mobile")},Ma.androidTablet=function(){return Ma.android()&&!Da("mobile")},Ma.blackberry=function(){return Da("blackberry")||Da("bb10")},Ma.blackberryPhone=function(){return Ma.blackberry()&&!Da("tablet")},Ma.blackberryTablet=function(){return Ma.blackberry()&&Da("tablet")},Ma.windows=function(){return Da("windows")},Ma.windowsPhone=function(){return Ma.windows()&&Da("phone")},Ma.windowsTablet=function(){return Ma.windows()&&Da("touch")&&!Ma.windowsPhone()},Ma.fxos=function(){return(Da("(mobile")||Da("(tablet"))&&Da(" rv:")},Ma.fxosPhone=function(){return Ma.fxos()&&Da("mobile")},Ma.fxosTablet=function(){return Ma.fxos()&&Da("tablet")},Ma.meego=function(){return Da("meego")},Ma.cordova=function(){return window.cordova&&"file:"===location.protocol},Ma.nodeWebkit=function(){return"object"===Mn(window.process)},Ma.mobile=function(){return Ma.androidPhone()||Ma.iphone()||Ma.ipod()||Ma.windowsPhone()||Ma.blackberryPhone()||Ma.fxosPhone()||Ma.meego()},Ma.tablet=function(){return Ma.ipad()||Ma.androidTablet()||Ma.blackberryTablet()||Ma.windowsTablet()||Ma.fxosTablet()},Ma.desktop=function(){return!Ma.tablet()&&!Ma.mobile()},new $o({name:"onClose"});dt=new $o({name:"onClose",onNewAegis:function(){var t,e,n,r=this;Ma.desktop()?(n=window.onunload,window.onunload=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.publishNotReportedLog(),null==n||n.call.apply(n,Zn([window],e))}):(t=this.publishNotReportedLog.bind(this),e=function d(e){"pagehide"!==e.type&&"hidden"!==document.visibilityState||(t(e),removeEventListener("visibilitychange",d,!0),removeEventListener("pagehide",d,!0))},addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0))},publishNotReportedLog:function(){var t=this;this.$walk(function(e){e.sendNow=!0,e.publishPluginsLogs(),e.publishLogsQueue(),t.publishThrottlePipeLogs(e)})},publishThrottlePipeLogs:function(e){null==e||e.speedLogPipeline([]),null==e||e.eventPipeline([]),null==e||e.customTimePipeline([]),null==e||e.normalLogPipeline([])}});return ka.use(Oi),ka.use(Y),ka.use(At),ka.use(K),ka.use(V),ka.use(oe),ka.use(xn),ka.use(pe),ka.use(bn),ka.use(dt),ka});
