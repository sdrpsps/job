{"version":3,"sources":["uni-app:///main.js","webpack:////Users/hchow/Documents/HBuilderProjects/zhiyebang/pages/login/login.vue?cd45","webpack:////Users/hchow/Documents/HBuilderProjects/zhiyebang/pages/login/login.vue?cac9","webpack:////Users/hchow/Documents/HBuilderProjects/zhiyebang/pages/login/login.vue?74c7","webpack:////Users/hchow/Documents/HBuilderProjects/zhiyebang/pages/login/login.vue?98e5","uni-app:///pages/login/login.vue","webpack:////Users/hchow/Documents/HBuilderProjects/zhiyebang/pages/login/login.vue?51da","webpack:////Users/hchow/Documents/HBuilderProjects/zhiyebang/pages/login/login.vue?2432"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=b237504c&scoped=true&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=b237504c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b237504c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=b237504c&scoped=true&\"","var components\ntry {\n  components = {\n    \"u-Form\": function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u--form/u--form\" */ \"@/uni_modules/uview-ui/components/u--form/u--form.vue\"\n      )\n    },\n    uFormItem: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-form-item/u-form-item\" */ \"@/uni_modules/uview-ui/components/u-form-item/u-form-item.vue\"\n      )\n    },\n    uInput: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-input/u-input\" */ \"@/uni_modules/uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    \"u-Text\": function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u--text/u--text\" */ \"@/uni_modules/uview-ui/components/u--text/u--text.vue\"\n      )\n    },\n    uCode: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-code/u-code\" */ \"@/uni_modules/uview-ui/components/u-code/u-code.vue\"\n      )\n    },\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uDivider: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-divider/u-divider\" */ \"@/uni_modules/uview-ui/components/u-divider/u-divider.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"hello\">\r\n\t\t\t<view class=\"top\">\r\n\t\t\t\t<text>您好！</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom\">\r\n\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t<text>欢迎来到职业帮，</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t<text>立即注册</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"loginForm\">\r\n\t\t\t<u--form labelPosition=\"left\" :model=\"loginForm\" :rules=\"loginFormRules\" ref=\"loginForm\">\r\n\t\t\t\t<u-form-item prop=\"phoneNum\" borderBottom>\r\n\t\t\t\t\t<u-input v-model=\"loginForm.phoneNum\" type=\"number\" placeholder=\"请输入手机号码\" clearable border=\"none\">\r\n\t\t\t\t\t\t<u--text text=\"+86\" margin=\"0 3px 0 0\" slot=\"prefix\"></u--text>\r\n\t\t\t\t\t</u-input>\r\n\t\t\t\t</u-form-item>\r\n\t\t\t\t<u-form-item prop=\"code\" borderBottom>\r\n\t\t\t\t\t<u-input v-model=\"loginForm.code\" type=\"number\" placeholder=\"请输入验证码\" border=\"none\">\r\n\t\t\t\t\t\t<template slot=\"suffix\">\r\n\t\t\t\t\t\t\t<u-code ref=\"uCode\" @change=\"codeChange\" seconds=\"20\" changeText=\"X秒重新获取\"></u-code>\r\n\t\t\t\t\t\t\t<u-button @tap=\"getCode\" :text=\"codeText\" type=\"success\" size=\"mini\" plain shape=\"circle\">\r\n\t\t\t\t\t\t\t</u-button>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</u-input>\r\n\r\n\t\t\t\t</u-form-item>\r\n\t\t\t</u--form>\r\n\t\t</view>\r\n\t\t<view class=\"btn\">\r\n\t\t\t<u-button text=\"登录\" type=\"success\" @click=\"login\" shape=\"circle\"></u-button>\r\n\t\t</view>\r\n\t\t<!-- 条件编译，只在微信小程序上显示微信登录 -->\r\n\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t<view class=\"divider\">\r\n\t\t\t<u-divider text=\"其他登录方式\"></u-divider>\r\n\t\t</view>\r\n\t\t<view class=\"wechat\">\r\n\t\t\t<image src=\"../../static/image/weixin@2x.png\" class=\"wechat\" @click=\"gotoWeChatLogin\"></image>\r\n\t\t</view>\r\n\t\t<!-- #endif -->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tconst myRequest = require(\"../../utils/request.js\")\r\n\tconst SiteConfig = require(\"../../config/site\")\r\n\timport {genTestUserSig} from \"../../debug/GenerateTestUserSig.js\"\n\tconst app = getApp();\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tloginForm: {\r\n\t\t\t\t\tphoneNum: \"\",\r\n\t\t\t\t\tcode: \"\",\r\n\t\t\t\t},\r\n\t\t\t\tloginFormRules: {\r\n\t\t\t\t\tphoneNum: [{\r\n\t\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: '请输入手机号码',\r\n\t\t\t\t\t\t\ttrigger: ['blur', 'change'],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// 自定义验证函数，见上说明\r\n\t\t\t\t\t\t\tvalidator: (rule, value, callback) => {\r\n\t\t\t\t\t\t\t\t// 上面有说，返回true表示校验通过，返回false表示不通过\r\n\t\t\t\t\t\t\t\t// uni.$u.test.mobile()就是返回true或者false的\r\n\t\t\t\t\t\t\t\treturn uni.$u.test.mobile(value);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmessage: '手机号码不正确',\r\n\t\t\t\t\t\t\t// 触发器可以同时用blur和change\r\n\t\t\t\t\t\t\ttrigger: ['change', 'blur'],\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tcode: {\r\n\t\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请填写验证码',\r\n\t\t\t\t\t\ttrigger: ['blur', 'change']\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcodeText: \"获取验证码\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 获取验证码按钮变化\r\n\t\t\tcodeChange(text) {\r\n\t\t\t\tthis.codeText = text;\r\n\t\t\t},\r\n\t\t\t// 获取验证码\r\n\t\t\tasync getCode() {\r\n\t\t\t\tif (this.$refs.uCode.canGetCode) {\r\n\t\t\t\t\t// 向后端请求验证码\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '正在获取验证码'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tlet _this = this;\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: \"https://yw.52kfw.cn/api/user/phone-get-code\",\r\n\t\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tif (res.statusCode == 200) {\r\n\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\tuni.$u.toast('验证码已发送');\r\n\t\t\t\t\t\t\t\t_this.$refs.uCode.start();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.$u.toast('倒计时结束后再发送');\r\n\t\t\t\t};\r\n\r\n\t\t\t},\r\n\t\t\t// 登录\r\n\t\t\tlogin() {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'https://yw.52kfw.cn/api/user/phone-login',\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tphone: this.loginForm.phoneNum,\r\n\t\t\t\t\t\tcode: this.loginForm.code\r\n\t\t\t\t\t},\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: (res) => {\r\n\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t\tlet {\r\n\t\t\t\t\t\t\tstatusCode,\r\n\t\t\t\t\t\t\tmessage\r\n\t\t\t\t\t\t} = res.data;\r\n\t\t\t\t\t\tif (statusCode != 200) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\t\t\ttitle: message,\r\n\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 设置缓存\r\n\t\t\t\t\t\t\tuni.setStorageSync(SiteConfig.CACHE_TOKEN, res.data.data.token);\r\n\t\t\t\t\t\t\tuni.setStorageSync(SiteConfig.CACHE_USERINFO, JSON.stringify(res.data.data\r\n\t\t\t\t\t\t\t\t.userInfo));\r\n\t\t\t\t\t\t\t// 提示\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ticon: \"success\",\r\n\t\t\t\t\t\t\t\ttitle: '登录成功',\r\n\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t// 跳转\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\turl: '/pages/mine/mine',\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}, 1000)\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 跳转微信登录\r\n\t\t\tgotoWeChatLogin() {\r\n\t\t\t\t// 弹窗并获取用户信息\r\n\t\t\t\tuni.getUserProfile({\r\n\t\t\t\t\tdesc: \"登录\",\r\n\t\t\t\t\tsuccess: function(infoRes) {\r\n\t\t\t\t\t\tconsole.log(\"用户信息\", infoRes);\r\n\t\t\t\t\t\t// 微信登录\r\n\t\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\t\tsuccess: function(codeRes) {\r\n\t\t\t\t\t\t\t\tconsole.log(\"获取code\", codeRes);\r\n\t\t\t\t\t\t\t\t// 请求接口\r\n\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\turl: \"https://yw.52kfw.cn/api/user/xcx-login\",\r\n\t\t\t\t\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\tjs_code: codeRes.code\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess: function(loginRes) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"登录情况\", loginRes);\r\n\t\t\t\t\t\t\t\t\t\tif (loginRes.data.statusCode == 200) {\r\n\t\t\t\t\t\t\t\t\t\t\t// 这里先不写入userInfo，后面获取到微信用户信息后再写\r\n\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync(SiteConfig.CACHE_TOKEN,\r\n\t\t\t\t\t\t\t\t\t\t\t\tloginRes.data.data.token)\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon: \"success\",\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"登录成功！\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\t\t\t\turl: \"https://yw.52kfw.cn/api/user/xcx-update-userinfo\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnickname: infoRes.userInfo\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.nickName,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tavatarUrl: infoRes.userInfo\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.avatarUrl\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Authorization\": \"Bearer \" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.getStorageSync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSiteConfig\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.CACHE_TOKEN)\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdateProfileRes) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"修改用户信息\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateProfileRes\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// 写入userInfo\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tSiteConfig\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.CACHE_USERINFO,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateProfileRes\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.data.data\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.userInfo))\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// IM登录\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet info = uni.getStorageSync(SiteConfig.CACHE_USERINFO)\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst userID = JSON.parse(info)._id;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst userSig =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgenTestUserSig(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserID)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.userSig;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst SDKAppID = app\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.globalData\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.SDKAppID;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.$TUIKit.login({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserID: userID,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserSig: userSig\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}).then((rs) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"=====IM登录成功======\",rs);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}).catch((\r\n\t\t\t\t\t\t\t\t\t\t\t\t\terror) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"======IM登录失败=====\",error);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"修改用户信息出错\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terr);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t// 跳转回我的\r\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: \"/pages/mine/mine\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"请求后端-Fail\", err);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\t\tconsole.log(\"微信登录-Fail\", err);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t// 拒绝登录\r\n\t\t\t\t\t\tconsole.log(\"获取用户信息-Fail\", err);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\t// 设置表单校验规则 否则表单校验无效\r\n\t\t\tthis.$refs.loginForm.setRules(this.loginFormRules);\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.content {\r\n\t\tmargin: 0 105rpx;\r\n\r\n\t\t.hello {\r\n\t\t\tpadding-top: 205rpx;\r\n\r\n\t\t\t.top {\r\n\t\t\t\tmargin-bottom: 29rpx;\r\n\t\t\t\tfont-size: 48rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tcolor: #181818;\r\n\t\t\t}\r\n\r\n\t\t\t.bottom {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\tfont-weight: lighter;\r\n\r\n\t\t\t\t.right {\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\tfont-weight: 400;\r\n\t\t\t\t\tborder-bottom: 1px solid #333;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.loginForm {\r\n\t\t\tmargin-top: 180rpx;\r\n\t\t}\r\n\r\n\t\t.btn {\r\n\t\t\tmargin-top: 234rpx;\r\n\t\t}\r\n\r\n\t\t.divider {\r\n\t\t\tmargin-top: 105rpx;\r\n\t\t}\r\n\r\n\t\t.wechat {\r\n\t\t\tmargin: 0 auto;\r\n\t\t\twidth: 70rpx;\r\n\t\t\theight: 57rpx;\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&id=b237504c&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&id=b237504c&lang=less&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1656663431771\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}